{"createdAt":"2025-05-12T04:18:03.058Z","updatedAt":"2025-05-14T01:10:10.000Z","id":"DtCpKy2X0P6XgX89","name":"[COLO] Daily Record","active":true,"nodes":[{"parameters":{"rule":{"interval":[{"triggerAtHour":23,"triggerAtMinute":30}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-2660,180],"id":"f18a1cd7-4c72-4b11-864a-b250d1abd040","name":"Schedule Trigger"},{"parameters":{"workflowId":{"__rl":true,"value":"hj1Qpz1LUngjnHW5","mode":"list","cachedResultName":"[Shared] (Sub) Google Spreadsheet Data Fetch using Opensheet"},"workflowInputs":{"mappingMode":"defineBelow","value":{},"matchingColumns":[],"schema":[],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[-2000,180],"id":"98c88793-505e-4238-ac34-19125e30d95c","name":"Execute Workflow"},{"parameters":{"assignments":{"assignments":[{"id":"6de9c35f-e0ed-49ca-8ca3-d1f83b69738f","name":"spreadsheet_id","value":"={{ $json.spreadsheet_id }}","type":"string"},{"id":"1824373f-7a19-44c3-b463-76f757a3752b","name":"tab_name","value":"Report","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2220,180],"id":"2a44644f-b427-44cd-be51-05863eb93430","name":"Set Excel Variables"},{"parameters":{"jsCode":"return $input.first().json.data;"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1780,180],"id":"8e9a563f-861b-42ef-99d6-498a72ae4414","name":"Get Excel Data"},{"parameters":{"options":{}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[-1560,180],"id":"2f2079b2-a6bc-4866-aa17-991d817b1583","name":"Loop Over Items"},{"parameters":{"assignments":{"assignments":[{"id":"c0147a99-d9a2-452c-ae1e-3c475cfc0e71","name":"row_number","value":"={{ $json.row_number }}","type":"number"},{"id":"59586205-9217-4676-966e-2ea4e7ee6ac0","name":"name","value":"={{ $json.name }}","type":"string"},{"id":"a2f0a1b6-06db-40a7-8699-d85b946276cd","name":"email","value":"={{ $json.email }}","type":"string"},{"id":"185dda87-1c53-421d-aad5-560eb4947e26","name":"github_org","value":"={{ $json.github_org }}","type":"string"},{"id":"611bd5c7-9ae6-4bea-bad5-a9894a6220cf","name":"github_id","value":"={{ $json.github_id }}","type":"string"},{"id":"5ab93ce1-0b3d-40d9-b907-5b5f2981c6ac","name":"github_api","value":"={{ $json.github_api }}","type":"string"},{"id":"92bf5bb0-6888-48a1-a791-255ec1e2a983","name":"jira_domain","value":"={{ $json.jira_domain }}","type":"string"},{"id":"02ad15bb-e6b7-4ff5-ba58-91489369d8a0","name":"jira_space","value":"={{ $json.jira_space }}","type":"string"},{"id":"e53b8991-1b8d-410c-8e1b-b2004bd48189","name":"jira_api","value":"={{ $json.jira_api }}","type":"string"},{"id":"4298fa2a-aef0-4398-b68f-2883b1c0a11a","name":"sheet_id","value":"={{ $json.sheet_id }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-1340,100],"id":"3c93a6a3-a912-417f-922c-397ae4fabb61","name":"Set Excel Row Variables"},{"parameters":{"workflowId":{"__rl":true,"value":"uGqCptWtD45pUJt4","mode":"list","cachedResultName":"[COLO] [Sub] Get COLO Variables"},"workflowInputs":{"mappingMode":"defineBelow","value":{},"matchingColumns":[],"schema":[],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[-2440,180],"id":"3ae30889-b1d1-4b3c-b414-a208c4e0bbf0","name":"Get COLO Variables"},{"parameters":{"jsCode":"const issues = $input.first().json.issues;\n\nconst issuesWithTime = issues.map((issue) => {\n\n  const {expand, self, id, key, fields,} = issue;\n\n  const project = fields?.project?.name\n  const summary = fields?.summary;\n\n  const issue_type = fields?.issuetype?.name;\n  const priority = fields.priority.name;\n  const status = fields?.status?.name;\n\n  const updated_at = fields?.statuscategorychangedate;\n\n  \n  return ({\n    id,\n    project,\n    key,\n    summary,\n    url: $('Set Excel Row Variables').first().json.jira_domain + '/browse/' + key,\n    issue_type,\n    priority,\n    status,\n    updated_at,\n  })\n})\n\nreturn issuesWithTime;"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-460,-200],"id":"962bb82f-361a-4cfc-bc13-8ba89da5a4cb","name":"Extract JIRA Issues"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"fe0b73a3-99de-4440-97a7-e2ba4bc02dd1","leftValue":"={{ $json.issues.length }}","rightValue":0,"operator":{"type":"number","operation":"gt"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-680,-200],"id":"67d90132-f41e-451b-b51a-90034c878855","name":"If JIRA Exist"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"67afa083-7c69-43c8-b6d8-0c328e208a6c","leftValue":"={{ $json.size }}","rightValue":0,"operator":{"type":"number","operation":"gt"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-460,0],"id":"afee7531-a3ec-48dc-a257-71634e8afc27","name":"If Confluence Exist"},{"parameters":{"jsCode":"const results = $input.first().json.results;\nconst date = $('Get COLO Variables').first().json.today\n\nreturn results.map((result) => {\n  const {\n    id,\t\n    type,\t\n    status,\n    title,\n    macroRenderedOutput , \n    extensions, \n    _expandable, \n    _links, \n    history, \n    version\n  } = result;\n\n  const created_at = history?.createdDate;\n  const updated_at = version?.when\n  const updated_friendly = version?.friendlyWhen\n  const url = $('Set Excel Row Variables').first().json.jira_domain +\"/wiki\"+_links.webui;\n\n  const version_number = version?.number;\n  \n  return {\n    id,\n    type,\n    status,\n    title,\n    created_at,\n    updated_at,\n    updated_friendly,\n    version: version_number, \n    url,\n  }\n})"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-240,0],"id":"3b92be87-8ec9-4468-8720-e7bccb8c8329","name":"Extract Confluence"},{"parameters":{"url":"=https://api.github.com/users/{{ $('Set Excel Row Variables').item.json.github_id }}/events","sendQuery":true,"queryParameters":{"parameters":[{"name":"per_page","value":"100"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Accept","value":"application/json"},{"name":"Authorization","value":"=Bearer {{ $('Set Excel Row Variables').item.json.github_api }}"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1120,300],"id":"c9cf5a82-ec33-4841-a416-cd946586005f","name":"Get Github"},{"parameters":{"jsCode":"const orgName =$('Get COLO Variables').first().json.github_organization\nconst items = $input.all()\n\nconst filteredEvents = items.filter(({json:event}) => {\n  const repoName = event.repo.name;\n  const isOrgRepo = repoName.startsWith(orgName); \n  \n  return isOrgRepo\n})\n  \nconst refinedEvents = filteredEvents.map(({json:event}) => {\n  const {id,type, actor, org, repo, payload, created_at} = event;\n  const {commits=[], ref} = payload;\n  const commit_count = commits?.length ?? 0;\n\n  return {\n      id,\n      type,\n      org: org.login,\n      repo: repo.name,\n      ref,\n      actor: actor.login,\n      commit_count,\n      created_at\n  };\n});\n\nconst refinedCommits = filteredEvents.map(({json:event}) => {\n  const { payload, created_at} = event;\n  const {commits=[]} = payload;\n\n  return commits.map(({sha, message, url}) => (\n    {\n      sha, \n      message: message?.length >=50000 ? message.slice(0,50000):message,\n      url,\n      created_at\n    }\n  ))\n})?.flatMap((json)=>json)\n\nreturn {\n  json: {\n    data: refinedEvents,\n    commits: refinedCommits,\n    all: refinedEvents?.length ?? 0\n  }\n}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-900,300],"id":"3444e62a-9694-424c-acc7-b884355d8d79","name":"Filter Git Event"},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"={{ $('Set Excel Row Variables').first().json.sheet_id}}","mode":"id"},"sheetName":{"__rl":true,"value":"Confluence","mode":"name"},"columns":{"mappingMode":"autoMapInputData","value":{},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"type","displayName":"type","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"status","displayName":"status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"title","displayName":"title","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"created_at","displayName":"created_at","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"updated_at","displayName":"updated_at","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"updated_friendly","displayName":"updated_friendly","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"version","displayName":"version","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"url","displayName":"url","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[-20,0],"id":"6e3a3d64-1289-4e66-a1c7-4755a02ea23b","name":"Set Confluence Sheet","credentials":{"googleSheetsOAuth2Api":{"id":"MPSPnxNCQdbeGyDV","name":"Developjik1 Colo Workflow Google Sheets account"}}},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"={{ $('Set Excel Row Variables').first().json.sheet_id}}","mode":"id"},"sheetName":{"__rl":true,"value":"JIRA","mode":"name"},"columns":{"mappingMode":"autoMapInputData","value":{},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"project","displayName":"project","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"key","displayName":"key","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"summary","displayName":"summary","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"url","displayName":"url","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"issue_type","displayName":"issue_type","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"priority","displayName":"priority","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"status","displayName":"status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"updated_at","displayName":"updated_at","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[-240,-200],"id":"3a5d6db5-3683-4112-851b-bc19c54d0e3d","name":"Set Jira Sheet","credentials":{"googleSheetsOAuth2Api":{"id":"MPSPnxNCQdbeGyDV","name":"Developjik1 Colo Workflow Google Sheets account"}}},{"parameters":{"jsCode":"return $input.first().json.data;"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-460,200],"id":"ce4d5f47-5a8d-46ae-b31b-fc784f6006f5","name":"Extract Git"},{"parameters":{"content":"#### 1ï¸âƒ£ **ìŠ¤ì¼€ì¤„ íŠ¸ë¦¬ê±°**\n- **ì‹¤í–‰ ì‹œê°„**: ë§¤ì¼ ì˜¤í›„ 10ì‹œ (`22:00`)\n- **ë…¸ë“œ ì´ë¦„**: `Schedule Trigger`\n\n---\n\n#### 2ï¸âƒ£ **ì„¤ì • ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°**\n- **ì„¤ëª…**: Jira ë„ë©”ì¸, GitHub ì¸ì¦ ì •ë³´ ë“± ê³µí†µ ì„¤ì • ê°’ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\n- **ë…¸ë“œ ì´ë¦„**: `Get COLO Variables`\n- **ë‹¤ìŒ ë‹¨ê³„**: `Set Excel Variables`\n\n---\n\n#### 3ï¸âƒ£ **ì—‘ì…€ ì‹œíŠ¸ ì„¤ì • ë° ë°ì´í„° ê°€ì ¸ì˜¤ê¸°**\n- **ì„¤ì •**: Google Sheet IDì™€ íƒ­ ì´ë¦„(`Report`)ì„ ì§€ì •í•©ë‹ˆë‹¤.\n  - **ë…¸ë“œ ì´ë¦„**: `Set Excel Variables`\n- **ì‹¤í–‰**: ì™¸ë¶€ ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹¤í–‰í•˜ì—¬ ì—‘ì…€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\n  - **ë…¸ë“œ ì´ë¦„**: `Execute Workflow`\n- **ë°ì´í„° ì¶”ì¶œ**: ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ ì²˜ë¦¬ ê°€ëŠ¥í•œ í˜•íƒœë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\n  - **ë…¸ë“œ ì´ë¦„**: `Get Excel Data`\n- **ë°˜ë³µ ì²˜ë¦¬**: ê° í–‰ì˜ ë°ì´í„°ë¥¼ í•˜ë‚˜ì”© ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ë£¨í”„ ì„¤ì •\n  - **ë…¸ë“œ ì´ë¦„**: `Loop Over Items`\n\n---\n\n#### 4ï¸âƒ£ **ì‚¬ìš©ìžë³„ ë³€ìˆ˜ ì„¤ì •**\n- **ì„¤ëª…**: í˜„ìž¬ í–‰ì˜ ë°ì´í„°(ì´ë¦„, ì´ë©”ì¼, GitHub ë¦¬í¬ì§€í† ë¦¬, Jira API í‚¤ ë“±)ë¥¼ ë³€ìˆ˜ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.\n  - **ë…¸ë“œ ì´ë¦„**: `Set Excel Row Variables`\n- **Jira ì¸ì¦ ìƒì„±**: ì´ë©”ì¼ê³¼ API í† í°ì„ ì‚¬ìš©í•´ Base64 ì¸ì½”ë”©ëœ Jira ì¸ì¦ ë¬¸ìžì—´ ìƒì„±\n  - **ë…¸ë“œ ì´ë¦„**: `Set jiraBase64Auth`\n\n---\n\n#### 5ï¸âƒ£ **Jira Issue ì¡°íšŒ**\n- **ì„¤ëª…**: ì˜¤ëŠ˜ ë˜ëŠ” ì´ë²ˆ ì£¼ì— ìƒì„±ë˜ê±°ë‚˜ ìˆ˜ì •ëœ ì´ìŠˆë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.\n  - **ì¿¼ë¦¬ ì˜ˆì‹œ**: `assignee = {{name}} AND (created >= startOfDay() OR updated >= startOfDay())`\n  - **ë…¸ë“œ ì´ë¦„**: `Get JIRA Issue`\n- **ì¡°ê±´ ì²´í¬**: ê²°ê³¼ê°€ ì¡´ìž¬í•˜ëŠ” ê²½ìš°ë§Œ ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰\n  - **ë…¸ë“œ ì´ë¦„**: `If JIRA Exist`\n- **ë°ì´í„° ê°€ê³µ**: ê°€ì ¸ì˜¨ ì´ìŠˆì— ë‚ ì§œ ì •ë³´ ì¶”ê°€\n  - **ë…¸ë“œ ì´ë¦„**: `Extract JIRA Issues`\n- **ì €ìž¥**: Google Sheetsì˜ \"JIRA\" ì‹œíŠ¸ì— ë°ì´í„° ì €ìž¥\n  - **ë…¸ë“œ ì´ë¦„**: `Set Jira Sheet`\n\n---\n\n#### 6ï¸âƒ£ **Confluence íŽ˜ì´ì§€ ì¡°íšŒ**\n- **ì„¤ëª…**: Confluenceì—ì„œ í•´ë‹¹ ì‚¬ìš©ìžê°€ ìƒì„±í•˜ê±°ë‚˜ ìˆ˜ì •í•œ íŽ˜ì´ì§€ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.\n  - **ì¿¼ë¦¬ ì˜ˆì‹œ**: `type = page AND space = COLO AND creator = ... AND (created >= startOfWeek() OR lastmodified >= startOfWeek())`\n  - **ë…¸ë“œ ì´ë¦„**: `Get Jira Confluence`\n- **ì¡°ê±´ ì²´í¬**: ê²°ê³¼ê°€ ì¡´ìž¬í•˜ëŠ” ê²½ìš°ë§Œ ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰\n  - **ë…¸ë“œ ì´ë¦„**: `If Confluence Exist`\n- **ë°ì´í„° ê°€ê³µ**: ê°€ì ¸ì˜¨ íŽ˜ì´ì§€ì— ë‚ ì§œ ì •ë³´ ì¶”ê°€\n  - **ë…¸ë“œ ì´ë¦„**: `Extract Confluence`\n- **ì €ìž¥**: Google Sheetsì˜ \"Confluence\" ì‹œíŠ¸ì— ë°ì´í„° ì €ìž¥\n  - **ë…¸ë“œ ì´ë¦„**: `Set Confluence Sheet`\n\n---\n\n#### 7ï¸âƒ£ **GitHub í™œë™ ìˆ˜ì§‘**\n- **ì„¤ëª…**: GitHub ì‚¬ìš©ìžì˜ ìµœê·¼ í™œë™(Event)ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\n  - **ë…¸ë“œ ì´ë¦„**: `Get Github`\n- **í•„í„°ë§**: íŠ¹ì • ì¡°ì§ ì†Œì†ì˜ ë¦¬í¬ì§€í† ë¦¬ í™œë™ë§Œ í•„í„°ë§\n  - **ë…¸ë“œ ì´ë¦„**: `Filter Git Event`\n- **ì¡°ê±´ ì²´í¬**: í•„í„°ë§ëœ ê²°ê³¼ê°€ ìžˆëŠ” ê²½ìš°ë§Œ ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰\n  - **ë…¸ë“œ ì´ë¦„**: `If`\n- **ë°ì´í„° ê°€ê³µ**: í•„ìš”í•œ ì»¤ë°‹ ì •ë³´ë§Œ ì¶”ì¶œ\n  - **ë…¸ë“œ ì´ë¦„**: `Extract Git`\n- **ì €ìž¥**: Google Sheetsì˜ \"Git\" ì‹œíŠ¸ì— ë°ì´í„° ì €ìž¥\n  - **ë…¸ë“œ ì´ë¦„**: `Google Sheets`\n\n---\n\n### ðŸ“¦ ìµœì¢… ì¶œë ¥\n- **Google Sheets**ì— ë‹¤ìŒê³¼ ê°™ì€ ì‹œíŠ¸ë¡œ ê²°ê³¼ê°€ ì €ìž¥ë©ë‹ˆë‹¤:\n  - `JIRA`: Jira ì´ìŠˆ ë‚´ì—­\n  - `Confluence`: Confluence íŽ˜ì´ì§€ ë‚´ì—­\n  - `Git`: GitHub í™œë™ ë‚´ì—­\n\n---\n\n### ðŸ”— ê´€ë ¨ ë§í¬\n- **Google Sheets ë¬¸ì„œ**  \n  [ì •ì¸ê¶Œ - Google Sheets](https://docs.google.com/spreadsheets/d/1V7Y-zVaCJApj2X4YaQDTIuUtcbXLpmULXIiJJVTlvG4/edit?usp=drivesdk)\n\n---\n\nì´ ë¬¸ì„œëŠ” n8n ê¸°ë°˜ì˜ ìžë™í™” ì›Œí¬í”Œë¡œìš°ë¥¼ ìš”ì•½í•œ ê²ƒìœ¼ë¡œ, ê° ë‹¨ê³„ë³„ ëª©ì ê³¼ íë¦„ì„ ê°„ê²°í•˜ê²Œ ì„¤ëª…í•©ë‹ˆë‹¤. í•„ìš”ì‹œ ì„¸ë¶€ íŒŒë¼ë¯¸í„°ë‚˜ ì½”ë“œ ë¡œì§ë„ ì¶”ê°€ë¡œ ì •ë¦¬í•´ ë“œë¦´ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.","height":900,"width":3480},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-3070,-1220],"id":"06a27c84-2c13-4b96-9499-7451949cf1b8","name":"Sticky Note"},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"={{ $('Set Excel Row Variables').first().json.sheet_id}}","mode":"id"},"sheetName":{"__rl":true,"value":"Git","mode":"name"},"columns":{"mappingMode":"autoMapInputData","value":{},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"type","displayName":"type","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"org","displayName":"org","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"repo","displayName":"repo","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"ref","displayName":"ref","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"actor","displayName":"actor","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"commit_count","displayName":"commit_count","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"created_at","displayName":"created_at","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[-240,200],"id":"db661d69-dcdb-46a3-8189-6538bffe014b","name":"Set Git Sheet","credentials":{"googleSheetsOAuth2Api":{"id":"MPSPnxNCQdbeGyDV","name":"Developjik1 Colo Workflow Google Sheets account"}}},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"={{ $('Set Excel Row Variables').first().json.sheet_id}}","mode":"id"},"sheetName":{"__rl":true,"value":"Commit","mode":"name"},"columns":{"mappingMode":"autoMapInputData","value":{},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"message","displayName":"message","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"url","displayName":"url","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"created_at","displayName":"created_at","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[-240,480],"id":"7982def9-6764-4060-995c-967775c223d6","name":"Set Commit Sheet","credentials":{"googleSheetsOAuth2Api":{"id":"MPSPnxNCQdbeGyDV","name":"Developjik1 Colo Workflow Google Sheets account"}}},{"parameters":{"jsCode":"const commits = $input.first().json.commits ?? [];\n\nreturn commits?.map((commit) =>{\n  const {sha, ...restCommit} = commit;\n\n  return {\n    id: sha,\n    ...restCommit\n  }\n})"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-460,400],"id":"cb09cf58-4c14-498c-bcef-3582e0a4bf59","name":"Extract Commit"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"f8fa486a-4b43-4ec4-844e-25e132501b69","leftValue":"={{ $json.all }}","rightValue":0,"operator":{"type":"number","operation":"gt"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-680,200],"id":"3e43279d-3579-4d06-a08f-a8c968ce2cd6","name":"If Git Exist"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"f8fa486a-4b43-4ec4-844e-25e132501b69","leftValue":"={{ $json.commits?.length }}","rightValue":0,"operator":{"type":"number","operation":"gt"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-680,400],"id":"f12004e9-8908-4cfd-9cb9-f333a58dd9ad","name":"If Commit Exist"},{"parameters":{"jsCode":"const email = $('Set Excel Row Variables').first().json.email;\nconst apiToken = $('Set Excel Row Variables').first().json.jira_api;\n\n// Base64 ì¸ì½”ë”©\nconst authString = `${email}:${apiToken}`;\nconst jiraBase64Auth = Buffer.from(authString).toString('base64');\n \nreturn {jiraBase64Auth};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1120,-100],"id":"f8e13853-39f5-4c43-bef1-e18df9249e44","name":"Set JIRA Auth"},{"parameters":{"jsCode":"const data = $input.all()?.[0].json;\nconst results = data?.results ?? []\n\nconst filteredResults = results.filter((result) => {\n  const name = $('Set Excel Row Variables').first().json.name;\n  const publicName = result?.history?.createdBy?.publicName\n\n  return name === publicName\n})\n\n\n\n            \nreturn {\n  json: {\n    results: filteredResults,\n    size: filteredResults?.length ?? 0\n  }\n}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-680,0],"id":"1740b0b1-e6e5-4464-83e0-c85601a6e22e","name":"Filter Confluence"},{"parameters":{"url":"={{ $('Set Excel Row Variables').item.json.jira_domain }}/wiki/rest/api/content/search","sendQuery":true,"queryParameters":{"parameters":[{"name":"cql","value":"=(type = page OR type = comment) AND space = {{ $('Set Excel Row Variables').item.json.jira_space }} AND (created >= startOfDay() OR lastModified >= startOfDay())"},{"name":"limit","value":"1000"},{"name":"expand","value":"version,history"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Accept","value":"application/json"},{"name":"Authorization","value":"=Basic {{ $json.jiraBase64Auth }}"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-900,0],"id":"33d95d02-9aed-4f56-a5a8-4594c2e24602","name":"Get Confluence"},{"parameters":{"method":"POST","url":"={{ $('Set Excel Row Variables').item.json.jira_domain }}/rest/api/3/search/jql","sendQuery":true,"queryParameters":{"parameters":[{}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Accept","value":"=application/json"},{"name":"Authorization","value":"=Basic {{ $json.jiraBase64Auth }}"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"jql\": \"assignee =  {{ $('Set Excel Row Variables').item.json.name }} AND (created >= startOfDay() OR updated >= startOfDay()) ORDER BY created DESC\",\n  \"maxResults\": 5000,\n  \"fields\": [\"*all\"]\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-900,-200],"id":"ad8c7b78-3807-401f-a95f-5d06129efbcf","name":"Get JIRA"}],"connections":{"Schedule Trigger":{"main":[[{"node":"Get COLO Variables","type":"main","index":0}]]},"Set Excel Variables":{"main":[[{"node":"Execute Workflow","type":"main","index":0}]]},"Execute Workflow":{"main":[[{"node":"Get Excel Data","type":"main","index":0}]]},"Get Excel Data":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Loop Over Items":{"main":[[],[{"node":"Set Excel Row Variables","type":"main","index":0}]]},"Set Excel Row Variables":{"main":[[{"node":"Set JIRA Auth","type":"main","index":0},{"node":"Get Github","type":"main","index":0}]]},"Get COLO Variables":{"main":[[{"node":"Set Excel Variables","type":"main","index":0}]]},"Extract JIRA Issues":{"main":[[{"node":"Set Jira Sheet","type":"main","index":0}]]},"If JIRA Exist":{"main":[[{"node":"Extract JIRA Issues","type":"main","index":0}]]},"If Confluence Exist":{"main":[[{"node":"Extract Confluence","type":"main","index":0}]]},"Extract Confluence":{"main":[[{"node":"Set Confluence Sheet","type":"main","index":0}]]},"Get Github":{"main":[[{"node":"Filter Git Event","type":"main","index":0}]]},"Filter Git Event":{"main":[[{"node":"If Git Exist","type":"main","index":0},{"node":"If Commit Exist","type":"main","index":0}]]},"Extract Git":{"main":[[{"node":"Set Git Sheet","type":"main","index":0}]]},"Set Git Sheet":{"main":[[]]},"Set Commit Sheet":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Extract Commit":{"main":[[{"node":"Set Commit Sheet","type":"main","index":0}]]},"If Git Exist":{"main":[[{"node":"Extract Git","type":"main","index":0}]]},"If Commit Exist":{"main":[[{"node":"Extract Commit","type":"main","index":0}]]},"Set JIRA Auth":{"main":[[{"node":"Get Confluence","type":"main","index":0},{"node":"Get JIRA","type":"main","index":0}]]},"Filter Confluence":{"main":[[{"node":"If Confluence Exist","type":"main","index":0}]]},"Get Confluence":{"main":[[{"node":"Filter Confluence","type":"main","index":0}]]},"Get JIRA":{"main":[[{"node":"If JIRA Exist","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Schedule Trigger":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"d3ebdb41-6d95-49ea-90c3-fb1294551069","triggerCount":1,"tags":[]}