{"createdAt":"2025-04-15T00:59:52.306Z","updatedAt":"2025-04-25T13:24:22.000Z","id":"FRODCFElBSxGH48g","name":"GitHub 일일 커밋 알림 봇","active":true,"nodes":[{"parameters":{"url":"=https://api.github.com/users/{{$node[\"Globals\"].json[\"repo\"][\"owner\"]}}/events/public","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Accept","value":"application/vnd.github+json"},{"name":"Authorization","value":"Bearer "}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1020,80],"id":"d1972038-1a03-4c39-a2fc-89b516852540","name":"Get Git Events"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"87ad96b7-c4be-48e9-96fa-ba0a23dab6f6","leftValue":"={{ $json.type }}","rightValue":"PushEvent","operator":{"type":"string","operation":"equals"}},{"id":"1fb2aefa-0988-44e1-a2c8-4d5e95d1159b","leftValue":"={{ $json.created_at.toDateTime().setZone('UTC').toFormat('yyyy-MM-dd') }}","rightValue":"={{ DateTime.now().setZone('UTC').toFormat('yyyy-MM-dd') }}","operator":{"type":"dateTime","operation":"equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.filter","typeVersion":2.2,"position":[1380,100],"id":"9331ea52-1fe4-404f-8431-2cb4b75a2a47","name":"Today Git Push Event Filter","alwaysOutputData":true},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"0f8a0415-b55a-41a8-ba84-6d7d58bb7114","leftValue":"={{ $node['Today Git Push Event Filter'].json }}","rightValue":0,"operator":{"type":"object","operation":"empty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1680,80],"id":"be9cf62a-24ba-4838-aaee-c309f15e9cb0","name":"If"},{"parameters":{"method":"POST","url":"https://discord.com/api/webhooks/1348334246753865850/gqwBzCljKys-G881RbornCMHRa3FWYYss273HWctBX7-O73vp_biGaLmJfP05zviQcK2","sendBody":true,"bodyParameters":{"parameters":[{"name":"content","value":"=📭 *No commits today!* 📭\n🔹 *User:* developjik\n⛔️ *Status:* No commits were made to any repositories.\n📌 Stay consistent and keep that green square alive! 💪"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1900,-200],"id":"760fc429-0727-42bf-82a8-c0f6278306c0","name":"Send To Discord"},{"parameters":{"values":{"string":[{"name":"repo.owner","value":"developjik"}]},"options":{}},"id":"760e2184-4044-418b-a450-c8c051267541","name":"Globals","type":"n8n-nodes-base.set","position":[800,80],"typeVersion":1},{"parameters":{"rule":{"interval":[{"triggerAtHour":22}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[580,80],"id":"e92edfc9-78f4-4a93-8f33-a9092cf6da22","name":"Schedule Trigger"},{"parameters":{"content":"# 🚀 GitHub 일일 커밋 알림 봇\n\n이 워크플로우는 매일 저녁 10시(22:00)에 실행되어 GitHub 사용자의 일일 커밋 여부를 확인합니다.\n\n📋 **작동 방식**:\n1. GitHub API로 사용자의 최근 이벤트 확인\n2. 오늘 날짜(UTC+9 기준)의 PushEvent만 필터링\n3. 커밋이 없으면 Discord로 알림 메시지 전송\n\n💡 **알림 내용**: \n- 커밋 없음 알림\n- 사용자명 표시\n- 동기부여 메시지 포함\n\n⚙️ **맞춤 설정**:\n- 다른 사용자 모니터링: 'Globals' 노드에서 'repo.owner' 값 변경\n- 체크 시간 변경: 'Schedule Trigger' 노드에서 시간 조정\n- 알림 메시지 수정: 'Send To Discord' 노드에서 content 변경","height":660,"width":1400},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[480,-420],"id":"f54a8019-8525-44c3-bccd-6d0e5cfd7c39","name":"Sticky Note"},{"parameters":{"jsCode":"/**\n * UTC 날짜 문자열을 한국 시간(KST)으로 변환하고 YYYY-MM-DD 형식으로 반환합니다.\n * @param {string|Date} utcDate - UTC 형식의 날짜 문자열 또는 Date 객체\n * @returns {string} - 한국 시간으로 변환된 YYYY-MM-DD 형식의 문자열\n */\nfunction convertUTCtoKoreaDate(utcDate) {\n  // 매개변수가 문자열이면 Date 객체로 변환, 이미 Date 객체라면 그대로 사용\n  const date = typeof utcDate === 'string' ? new Date(utcDate) : utcDate;\n  \n  // 유효한 날짜인지 확인\n  if (isNaN(date.getTime())) {\n    throw new Error('유효하지 않은 날짜 형식입니다.');\n  }\n  \n  // 한국 시간대로 변환 (UTC+9)\n  const koreaDate = new Date(date);\n  \n  // YYYY-MM-DD 형식으로 포맷팅\n  const year = koreaDate.getFullYear();\n  const month = String(koreaDate.getMonth() + 1).padStart(2, '0'); // 월은 0부터 시작하므로 +1\n  const day = String(koreaDate.getDate()).padStart(2, '0');\n  \n  return `${year}-${month}-${day}`;\n}\n\n// 현재 날짜(한국 시간)\nconst todayKoreaDate = convertUTCtoKoreaDate(new Date());\nconsole.log(\"오늘 한국 날짜:\", todayKoreaDate);\n\n// 원본 아이템을 필터링\nconst filterInput = $input.all().filter(item => {\n  const itemDate = convertUTCtoKoreaDate(item.json.created_at);\n  console.log(\"아이템 타입:\", item.json.type);\n  console.log(\"아이템 날짜:\", itemDate);\n  \n  // PushEvent이면서 오늘 날짜인 항목만 필터링\n  return item.json.type === 'PushEvent' && itemDate === todayKoreaDate;\n});\n\nconsole.log(\"필터링된 아이템 수:\", filterInput.length);\nreturn filterInput;"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1200,80],"id":"186a1a0e-0535-451f-bb8f-33991016817d","name":"Code"}],"connections":{"Get Git Events":{"main":[[{"node":"Code","type":"main","index":0}]]},"Today Git Push Event Filter":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[]]},"Globals":{"main":[[{"node":"Get Git Events","type":"main","index":0}]]},"Schedule Trigger":{"main":[[{"node":"Globals","type":"main","index":0}]]},"Code":{"main":[[{"node":"Today Git Push Event Filter","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Git Commit Check Schedule Trigger":{"recurrenceRules":[]},"node:Schedule Trigger":{"recurrenceRules":[]}},"meta":null,"pinData":{},"versionId":"1b5ca10d-c188-401a-8fd2-56cbc7f274fc","triggerCount":1,"tags":[],"safeName":"GitHub 일일 커밋 알림 봇"}