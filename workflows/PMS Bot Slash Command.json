{"createdAt":"2025-04-21T02:32:07.036Z","updatedAt":"2025-04-30T08:43:38.000Z","id":"BcLRdJU0QIn1UcpJ","name":"PMS Bot Slash Command","active":true,"nodes":[{"parameters":{"httpMethod":"POST","path":"=jira-status","options":{"responseData":""}},"id":"81c2a3ac-e9fc-44bd-af4a-fc5a8fd4f851","name":"Slack jira_status Webhook","type":"n8n-nodes-base.webhook","position":[640,-320],"webhookId":"78214945-1731-46ca-a13f-132df9ee1d14","typeVersion":2},{"parameters":{"operation":"getAll","returnAll":true,"options":{"jql":"={{`assignee IN (${$node[\"Slack jira_status Webhook\"].json.body.text}) AND issuetype IN (Story, Bug) AND statusCategory != Done`}}"}},"name":"Jira Search","type":"n8n-nodes-base.jira","typeVersion":1,"position":[860,-320],"id":"ef9400e9-a4b0-4d37-84b6-dd2ecdda9fc0","credentials":{"jiraSoftwareCloudApi":{"id":"jd9f8LcXIUpGLHG7","name":"Colo Developjik1 Jira SW Cloud account"}}},{"parameters":{"jsCode":"// ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst items = $input.all();\nlet jiraIssues = [];\n\n// ì•„ì´í…œì—ì„œ ì´ìŠˆ ë°ì´í„° ìˆ˜ì§‘\nif (items?.length > 0) {\n  jiraIssues = items.filter(item => item.json).map(item => item.json);\n}\n\n// JIRA ë„ë©”ì¸ ì„¤ì • (ë§í¬ìš©)\nconst JIRA_DOMAIN = 'https://your-domain.atlassian.net'; // ì—¬ê¸°ì— ì‹¤ì œ JIRA ë„ë©”ì¸ ì…ë ¥\n\n// ìƒíƒœë³„ ë¶„ë¥˜\nconst inProgressIssues = jiraIssues.filter(issue => \n  issue.fields?.statusCategory?.key === 'indeterminate'\n);\nconst todoIssues = jiraIssues.filter(issue => \n  issue.fields?.statusCategory?.key === 'new'\n);\n\n// ë‚ ì§œ í¬ë§·íŒ…\nconst today = new Date();\nconst formattedDate = `${today.getFullYear()}ë…„ ${today.getMonth() + 1}ì›” ${today.getDate()}ì¼`;\n\n// ìš°ì„ ìˆœìœ„ ì´ëª¨ì§€ ë§¤í•‘\nconst priorityEmojis = {\n  'Highest': 'ğŸ”´',\n  'High': 'ğŸŸ ',\n  'Medium': 'ğŸŸ¡',\n  'Low': 'ğŸŸ¢',\n  'Lowest': 'ğŸ”µ'\n};\n\n// ì´ìŠˆ íƒ€ì… ì´ëª¨ì§€ ë§¤í•‘\nconst issueTypeEmojis = {\n  'Bug': 'ğŸ',\n  'Story': 'ğŸ“œ',\n  'Task': 'ğŸ“‹',\n  'Epic': 'ğŸ†',\n  'Sub-task': 'ğŸ“'\n};\n\n// ì´ìŠˆ ë¸”ë¡ ìƒì„± í•¨ìˆ˜\nconst createIssueBlock = (issue, index) => {\n  const blocks = [];\n  const issueType = issue.fields?.issuetype?.name || 'Task';\n  const priorityEmoji = issue.fields?.priority?.name ? \n    (priorityEmojis[issue.fields.priority.name] || 'âšªï¸') : 'âšªï¸';\n  const typeEmoji = issueTypeEmojis[issueType] || 'ğŸ“„';\n  \n  // ì´ìŠˆ ë§í¬ ìƒì„±\n  const issueLink = `${JIRA_DOMAIN}/browse/${issue.key}`;\n  \n  // ì´ìŠˆ ì œëª©ê³¼ ê°„ë‹¨ ì •ë³´  \n  blocks.push({\n    \"type\": \"section\",\n    \"text\": {\n      \"type\": \"mrkdwn\",\n      \"text\": `*${index+1}. <${issueLink}|${issue.key}>* ${typeEmoji} ${priorityEmoji} *${issue.fields.summary}*`\n    }\n  });\n  \n  // ìƒíƒœ, ìš°ì„ ìˆœìœ„, ë‹´ë‹¹ì ì •ë³´\n  const assigneeName = issue.fields?.assignee?.displayName || 'ë¯¸ë°°ì •';\n  const statusName = issue.fields?.status?.name || 'ìƒíƒœì—†ìŒ';\n  const priorityName = issue.fields?.priority?.name || 'ìš°ì„ ìˆœìœ„ì—†ìŒ';\n  \n  blocks.push({\n    \"type\": \"context\",\n    \"elements\": [\n      {\n        \"type\": \"mrkdwn\",\n        \"text\": `â€¢ ìƒíƒœ: *${statusName}* â€¢ ìš°ì„ ìˆœìœ„: *${priorityName}* â€¢ ë‹´ë‹¹ì: *${assigneeName}*`\n      }\n    ]\n  });\n  \n  // ì´ìŠˆì— ì„¤ëª…ì´ ìˆë‹¤ë©´ ì§§ê²Œ í‘œì‹œ (ì„ íƒì‚¬í•­)\n  if (issue.fields?.description && issue.fields.description.length > 0) {\n    let description = issue.fields.description;\n    // ì„¤ëª…ì´ ë„ˆë¬´ ê¸¸ë©´ ì˜ë¼ë‚´ê¸°\n    if (description.length > 100) {\n      description = description.substring(0, 97) + '...';\n    }\n    \n    blocks.push({\n      \"type\": \"context\",\n      \"elements\": [\n        {\n          \"type\": \"mrkdwn\",\n          \"text\": `ğŸ’¬ ${description}`\n        }\n      ]\n    });\n  }\n  \n  return blocks;\n};\n\n// Slack Block Kit ë©”ì‹œì§€ ìƒì„±\nconst slackBlocks = [\n  // í—¤ë” ì„¹ì…˜\n  {\n    \"type\": \"header\",\n    \"text\": {\n      \"type\": \"plain_text\",\n      \"text\": `ğŸ“Š JIRA ì‘ì—… í˜„í™© ë³´ê³  (${formattedDate} ê¸°ì¤€)`,\n      \"emoji\": true\n    }\n  },\n  { \"type\": \"divider\" },\n  \n  // ì§„í–‰ ì¤‘ì¸ ì‘ì—… ì„¹ì…˜\n  {\n    \"type\": \"section\",\n    \"text\": {\n      \"type\": \"mrkdwn\",\n      \"text\": `*ğŸ”¶ ì§„í–‰ ì¤‘ì¸ ì‘ì—… (IN PROGRESS)* - ì´ ${inProgressIssues.length}ê±´`\n    }\n  }\n];\n\n// ì§„í–‰ ì¤‘ì¸ ì‘ì—… ëª©ë¡ ì¶”ê°€\nif (inProgressIssues.length === 0) {\n  slackBlocks.push({\n    \"type\": \"section\",\n    \"text\": {\n      \"type\": \"mrkdwn\",\n      \"text\": \"ğŸ“­ ì§„í–‰ ì¤‘ì¸ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤.\"\n    }\n  });\n} else {\n  inProgressIssues.forEach((issue, index) => {\n    // ì´ìŠˆ ë¸”ë¡ ìƒì„± ë° ì¶”ê°€\n    const issueBlocks = createIssueBlock(issue, index);\n    slackBlocks.push(...issueBlocks);\n    \n    // êµ¬ë¶„ì„  ì¶”ê°€ (ë§ˆì§€ë§‰ í•­ëª© ì œì™¸)\n    if (index < inProgressIssues.length - 1) {\n      slackBlocks.push({ \"type\": \"divider\" });\n    }\n  });\n}\n\n// í•  ì‘ì—… ì„¹ì…˜ í—¤ë”\nslackBlocks.push(\n  { \"type\": \"divider\" },\n  {\n    \"type\": \"section\",\n    \"text\": {\n      \"type\": \"mrkdwn\",\n      \"text\": `*ğŸ”· ì•ìœ¼ë¡œ í•  ì‘ì—… (TO DO)* - ì´ ${todoIssues.length}ê±´`\n    }\n  }\n);\n\n// í•  ì‘ì—… ëª©ë¡ ì¶”ê°€\nif (todoIssues.length === 0) {\n  slackBlocks.push({\n    \"type\": \"section\",\n    \"text\": {\n      \"type\": \"mrkdwn\",\n      \"text\": \"ğŸ“­ í•  ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤.\"\n    }\n  });\n} else {\n  todoIssues.forEach((issue, index) => {\n    // ì´ìŠˆ ë¸”ë¡ ìƒì„± ë° ì¶”ê°€\n    const issueBlocks = createIssueBlock(issue, index);\n    slackBlocks.push(...issueBlocks);\n    \n    // êµ¬ë¶„ì„  ì¶”ê°€ (ë§ˆì§€ë§‰ í•­ëª© ì œì™¸)\n    if (index < todoIssues.length - 1) {\n      slackBlocks.push({ \"type\": \"divider\" });\n    }\n  });\n}\n\n// ìš”ì•½ ì •ë³´ ì„¹ì…˜\nslackBlocks.push(\n  { \"type\": \"divider\" },\n  {\n    \"type\": \"header\",\n    \"text\": {\n      \"type\": \"plain_text\",\n      \"text\": \"ğŸ“Œ ìš”ì•½\",\n      \"emoji\": true\n    }\n  },\n  {\n    \"type\": \"section\",\n    \"fields\": [\n      {\n        \"type\": \"mrkdwn\",\n        \"text\": `*ì „ì²´ ì‘ì—…:*\\n${jiraIssues.length}ê±´`\n      },\n      {\n        \"type\": \"mrkdwn\",\n        \"text\": `*ì§„í–‰ ì¤‘:*\\n${inProgressIssues.length}ê±´`\n      },\n      {\n        \"type\": \"mrkdwn\",\n        \"text\": `*í•  ì‘ì—…:*\\n${todoIssues.length}ê±´`\n      }\n    ]\n  },\n  // ë°”ë‹¥ê¸€ - ë³´ê³ ì„œ ìƒì„± ì •ë³´\n  {\n    \"type\": \"context\",\n    \"elements\": [\n      {\n        \"type\": \"mrkdwn\",\n        \"text\": `â±ï¸ ë³´ê³ ì„œ ìƒì„± ì‹œê°„: ${new Date().toLocaleTimeString()}`\n      }\n    ]\n  }\n);\n\n// ê²°ê³¼ ë°˜í™˜\nreturn {blocks: slackBlocks};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1080,-320],"id":"0b1fdbad-61b1-4287-aae5-66a769d6ae66","name":"My Jira To Slack Message"},{"parameters":{"select":"channel","channelId":{"__rl":true,"value":"={{$node[\"Slack jira_status Webhook\"].json.body.channel_id}}","mode":"id"},"messageType":"block","blocksUi":"={{ $json.blocks }}","text":"= ","otherOptions":{}},"type":"n8n-nodes-base.slack","typeVersion":2.3,"position":[1300,-320],"id":"e53c9039-4ac2-4b9f-ac95-0a63b0aafa4e","name":"Slack","webhookId":"9fe89c7c-b2e2-4562-8c45-c603b997a890","credentials":{"slackApi":{"id":"Bqw9EwOIkH7skn99","name":"PMS BOT"}}},{"parameters":{"content":"ğŸ“Š JIRA-Slack ìë™í™” ì›Œí¬í”Œë¡œìš° ğŸ”„\n\nì´ n8n ì›Œí¬í”Œë¡œìš°ëŠ” Slackì—ì„œ íŠ¹ì • ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ ë‹´ë‹¹ìì˜ JIRA ì‘ì—… í˜„í™©ì„ \nìë™ìœ¼ë¡œ ìˆ˜ì§‘í•˜ì—¬ ë³´ê³ ì„œ í˜•íƒœë¡œ Slackì— ë³´ë‚´ì£¼ëŠ” ìë™í™” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.\n\nğŸ”¹ ì£¼ìš” êµ¬ì„± ìš”ì†Œ:\n  ğŸ£ Slack ì›¹í›…: ì§€ì •ëœ ê²½ë¡œë¡œ Slack ëª…ë ¹ì–´ ìˆ˜ì‹ \n  ğŸ” JIRA ê²€ìƒ‰: íŠ¹ì • ë‹´ë‹¹ìì˜ ë¯¸ì™„ë£Œ ì‘ì—…(Story, Bug) ì¡°íšŒ\n  ğŸ’» ì½”ë“œ ë…¸ë“œ: JIRA ë°ì´í„°ë¥¼ Slack ë©”ì‹œì§€ í˜•ì‹ìœ¼ë¡œ ë³€í™˜\n  ğŸ“¢ Slack ë°œì‹ : í¬ë§·ëœ ì‘ì—… í˜„í™© ë³´ê³ ì„œë¥¼ ì±„ë„ì— ì „ì†¡\n\nâš¡ ì‘ì—… ìƒíƒœ êµ¬ë¶„:\n  ğŸ”¶ IN PROGRESS - ì§„í–‰ ì¤‘ì¸ ì‘ì—…\n  ğŸ”· TO DO - ì•ìœ¼ë¡œ í•  ì‘ì—…\n\nğŸ¯ ìš°ì„ ìˆœìœ„ í‘œì‹œ:\n  ğŸ”´ Highest  ğŸŸ  High  ğŸŸ¡ Medium  ğŸŸ¢ Low  ğŸ”µ Lowest","height":600,"width":1020},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[510,-760],"id":"ffea2c94-9773-4865-8342-71aa3ba88b4d","name":"Sticky Note"}],"connections":{"Slack jira_status Webhook":{"main":[[{"node":"Jira Search","type":"main","index":0}]]},"Jira Search":{"main":[[{"node":"My Jira To Slack Message","type":"main","index":0}]]},"My Jira To Slack Message":{"main":[[{"node":"Slack","type":"main","index":0}]]},"Slack":{"main":[[]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"ab7f4a23-71a3-4a91-871b-b7456af3d703","triggerCount":1,"tags":[],"safeName":"PMS Bot Slash Command"}