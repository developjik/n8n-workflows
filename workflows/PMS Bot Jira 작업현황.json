{"createdAt":"2025-04-16T04:22:08.092Z","updatedAt":"2025-04-22T07:01:57.000Z","id":"4mvHVAF3QOFaqLZT","name":"PMS Bot Jira ì‘ì—…í˜„í™©","active":true,"nodes":[{"parameters":{"select":"channel","channelId":{"__rl":true,"value":"C08BBCYDV4M","mode":"list","cachedResultName":"engineering_pms"},"text":"={{ $json.slackMessage }}","otherOptions":{}},"type":"n8n-nodes-base.slack","typeVersion":2.3,"position":[620,0],"id":"2f3553e7-994b-4132-97a1-4427afa21a48","name":"Slack","webhookId":"9fe89c7c-b2e2-4562-8c45-c603b997a890","credentials":{"slackApi":{"id":"Bqw9EwOIkH7skn99","name":"PMS BOT"}}},{"parameters":{"rule":{"interval":[{"field":"weeks","triggerAtDay":[1,2,3,4,5],"triggerAtHour":9}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[0,0],"id":"df555a2d-6360-4cf1-864d-9412de584355","name":"09:00 Trigger"},{"parameters":{"operation":"getAll","returnAll":true,"options":{"jql":"assignee IN (currentUser(), \"ê¹€ì¬í•œ\", \"ê¹€ìƒí˜„\") AND issuetype IN (Story, Bug) AND statusCategory != Done"}},"id":"8d0b159c-c8e3-4d68-abfe-c160b22bbb81","name":"Get PMS Developer Jira Issues","type":"n8n-nodes-base.jira","position":[180,0],"typeVersion":1,"credentials":{"jiraSoftwareCloudApi":{"id":"jd9f8LcXIUpGLHG7","name":"Colo Developjik1 Jira SW Cloud account"}}},{"parameters":{"jsCode":"// ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst items = $input.all();\nlet jiraIssues = [];\n\n// ëª¨ë“  ì•„ì´í…œì˜ json ì†ì„±ì—ì„œ ì´ìŠˆ ë°ì´í„° ìˆ˜ì§‘\nif (items && items.length > 0) {\n  items.forEach(item => {\n    if (item.json) {\n      jiraIssues.push(item.json);\n    }\n  });\n}\n\n// ìƒíƒœë³„ ë¶„ë¥˜\nconst inProgressIssues = jiraIssues.filter(issue => \n  issue.fields && \n  issue.fields.statusCategory && \n  issue.fields.statusCategory.key === 'indeterminate'\n);\n\nconst todoIssues = jiraIssues.filter(issue => \n  issue.fields && \n  issue.fields.statusCategory && \n  issue.fields.statusCategory.key === 'new'\n);\n\n// ë‚ ì§œ í¬ë§·íŒ…\nconst today = new Date();\nconst formattedDate = `${today.getFullYear()}ë…„ ${today.getMonth() + 1}ì›” ${today.getDate()}ì¼`;\n\n// ìš°ì„ ìˆœìœ„ ì´ëª¨ì§€ ë§¤í•‘\nconst priorityEmojis = {\n  'Highest': 'ğŸ”´',\n  'High': 'ğŸŸ ',\n  'Medium': 'ğŸŸ¡',\n  'Low': 'ğŸŸ¢',\n  'Lowest': 'ğŸ”µ'\n};\n\n// ìŠ¬ë™ ë©”ì‹œì§€ í¬ë§· ìƒì„±\nlet slackMessage = `*ğŸ“Š JIRA ì‘ì—… í˜„í™© ë³´ê³ * (${formattedDate} ê¸°ì¤€)\\n\\n`;\n\n// ì§„í–‰ ì¤‘ì¸ ì‘ì—…\nslackMessage += `*ğŸ”¶ ì§„í–‰ ì¤‘ì¸ ì‘ì—… (IN PROGRESS)* - ì´ ${inProgressIssues.length}ê±´\\n`;\nslackMessage += \"```\\n\";\n\nif (inProgressIssues.length === 0) {\n  slackMessage += \"ğŸ“­ ì§„í–‰ ì¤‘ì¸ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤.\\n\";\n} else {\n  inProgressIssues.forEach((issue, index) => {\n    const priorityEmoji = issue.fields.priority && issue.fields.priority.name ? \n      (priorityEmojis[issue.fields.priority.name] || 'âšªï¸') : 'âšªï¸';\n    \n    slackMessage += `${index+1}. <${issue.key}> ${priorityEmoji} *${issue.fields.summary}*\\n`;\n    slackMessage += `   â€¢ ìƒíƒœ: ${issue.fields.status.name}\\n`;\n    \n    // ìš°ì„ ìˆœìœ„ê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ ì¶”ê°€\n    if (issue.fields.priority && issue.fields.priority.name) {\n      slackMessage += `   â€¢ ìš°ì„ ìˆœìœ„: ${issue.fields.priority.name}\\n`;\n    }\n    \n    // ë‹´ë‹¹ì ì •ë³´ ì¶”ê°€ (ìˆëŠ” ê²½ìš°)\n    if (issue.fields.assignee && issue.fields.assignee.displayName) {\n      slackMessage += `   â€¢ ë‹´ë‹¹ì: ${issue.fields.assignee.displayName}\\n`;\n    }\n    \n    slackMessage += \"\\n\";\n  });\n}\nslackMessage += \"```\\n\";\n\n// í•  ì‘ì—…\nslackMessage += `\\n*ğŸ”· ì•ìœ¼ë¡œ í•  ì‘ì—… (TO DO)* - ì´ ${todoIssues.length}ê±´\\n`;\nslackMessage += \"```\\n\";\n\nif (todoIssues.length === 0) {\n  slackMessage += \"ğŸ“­ í•  ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤.\\n\";\n} else {\n  todoIssues.forEach((issue, index) => {\n    const priorityEmoji = issue.fields.priority && issue.fields.priority.name ? \n      (priorityEmojis[issue.fields.priority.name] || 'âšªï¸') : 'âšªï¸';\n    \n    slackMessage += `${index+1}. <${issue.key}> ${priorityEmoji} *${issue.fields.summary}*\\n`;\n    slackMessage += `   â€¢ ìƒíƒœ: ${issue.fields.status.name}\\n`;\n    \n    // ìš°ì„ ìˆœìœ„ê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ ì¶”ê°€\n    if (issue.fields.priority && issue.fields.priority.name) {\n      slackMessage += `   â€¢ ìš°ì„ ìˆœìœ„: ${issue.fields.priority.name}\\n`;\n    }\n    \n    // ë‹´ë‹¹ì ì •ë³´ ì¶”ê°€ (ìˆëŠ” ê²½ìš°)\n    if (issue.fields.assignee && issue.fields.assignee.displayName) {\n      slackMessage += `   â€¢ ë‹´ë‹¹ì: ${issue.fields.assignee.displayName}\\n`;\n    }\n    \n    slackMessage += \"\\n\";\n  });\n}\nslackMessage += \"```\\n\";\n\n// ìš”ì•½ ì •ë³´ ì¶”ê°€\nslackMessage += `\\n*ğŸ“Œ ìš”ì•½*\\n`;\nslackMessage += `â€¢ ì „ì²´ ì‘ì—…: ${jiraIssues.length}ê±´\\n`;\nslackMessage += `â€¢ ì§„í–‰ ì¤‘: ${inProgressIssues.length}ê±´\\n`;\nslackMessage += `â€¢ í•  ì‘ì—…: ${todoIssues.length}ê±´\\n`;\n\n// ê²°ê³¼ ë°˜í™˜\nreturn [{json: {slackMessage}}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[400,0],"id":"6d59d161-34fb-4ed4-a083-83a25fe67d85","name":"Jira To Slack Message"}],"connections":{"09:00 Trigger":{"main":[[{"node":"Get PMS Developer Jira Issues","type":"main","index":0}]]},"Get PMS Developer Jira Issues":{"main":[[{"node":"Jira To Slack Message","type":"main","index":0}]]},"Jira To Slack Message":{"main":[[{"node":"Slack","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Schedule Trigger":{"recurrenceRules":[]},"node:09:00 Schedule Trigger":{"recurrenceRules":[]},"node:17:00 Schedule Trigger":{"recurrenceRules":[]},"node:09:00 Trigger":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"199fd73c-f8a1-4d2d-aff7-67d0d170068c","triggerCount":1,"tags":[]}