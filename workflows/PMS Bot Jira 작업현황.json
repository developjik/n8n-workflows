{"createdAt":"2025-04-16T04:22:08.092Z","updatedAt":"2025-04-24T01:49:06.000Z","id":"4mvHVAF3QOFaqLZT","name":"PMS Bot Jira ì‘ì—…í˜„í™©","active":true,"nodes":[{"parameters":{"select":"channel","channelId":{"__rl":true,"value":"C08BBCYDV4M","mode":"list","cachedResultName":"engineering_pms"},"messageType":"block","blocksUi":"={{ $json }}","text":"= ","otherOptions":{}},"type":"n8n-nodes-base.slack","typeVersion":2.3,"position":[660,0],"id":"2f3553e7-994b-4132-97a1-4427afa21a48","name":"Slack","webhookId":"9fe89c7c-b2e2-4562-8c45-c603b997a890","credentials":{"slackApi":{"id":"Bqw9EwOIkH7skn99","name":"PMS BOT"}}},{"parameters":{"rule":{"interval":[{"field":"weeks","triggerAtDay":[1,2,3,4,5],"triggerAtHour":9}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[0,0],"id":"df555a2d-6360-4cf1-864d-9412de584355","name":"09:00 Trigger"},{"parameters":{"operation":"getAll","returnAll":true,"options":{"jql":"assignee IN (currentUser(), \"ê¹€ì¬í•œ\", \"ê¹€ìƒí˜„\") AND issuetype IN (Story, Bug) AND statusCategory != Done"}},"id":"8d0b159c-c8e3-4d68-abfe-c160b22bbb81","name":"Get PMS Developer Jira Issues","type":"n8n-nodes-base.jira","position":[220,0],"typeVersion":1,"credentials":{"jiraSoftwareCloudApi":{"id":"jd9f8LcXIUpGLHG7","name":"Colo Developjik1 Jira SW Cloud account"}}},{"parameters":{"jsCode":"// ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst items = $input.all();\nlet jiraIssues = [];\n\n// ëª¨ë“  ì•„ì´í…œì˜ json ì†ì„±ì—ì„œ ì´ìŠˆ ë°ì´í„° ìˆ˜ì§‘\nif (items && items.length > 0) {\n  items.forEach(item => {\n    if (item.json) {\n      jiraIssues.push(item.json);\n    }\n  });\n}\n\n// JIRA ë„ë©”ì¸ ì„¤ì • (ë§í¬ìš©)\nconst JIRA_DOMAIN = 'https://colosseum.atlassian.net/';\n\n// ìƒíƒœë³„ ë¶„ë¥˜\nconst inProgressIssues = jiraIssues.filter(issue => \n  issue.fields && \n  issue.fields.statusCategory && \n  issue.fields.statusCategory.key === 'indeterminate'\n);\nconst todoIssues = jiraIssues.filter(issue => \n  issue.fields && \n  issue.fields.statusCategory && \n  issue.fields.statusCategory.key === 'new'\n);\n\n// ë‚ ì§œ í¬ë§·íŒ…\nconst today = new Date();\nconst formattedDate = `${today.getFullYear()}ë…„ ${today.getMonth() + 1}ì›” ${today.getDate()}ì¼`;\n\n// ìš°ì„ ìˆœìœ„ ì´ëª¨ì§€ ë§¤í•‘\nconst priorityEmojis = {\n  'Highest': 'ğŸ”´',\n  'High': 'ğŸŸ ',\n  'Medium': 'ğŸŸ¡',\n  'Low': 'ğŸŸ¢',\n  'Lowest': 'ğŸ”µ'\n};\n\n// ì´ìŠˆ íƒ€ì… ì´ëª¨ì§€ ë§¤í•‘\nconst issueTypeEmojis = {\n  'Bug': 'ğŸ',\n  'Story': 'ğŸ“',\n  'Task': 'âœ…',\n  'Epic': 'ğŸ†',\n  'Sub-task': 'ğŸ“'\n};\n\n// Slack Block Kit ë©”ì‹œì§€ ìƒì„±\nconst blocks = [\n  // í—¤ë” ì„¹ì…˜\n  {\n    \"type\": \"header\",\n    \"text\": {\n      \"type\": \"plain_text\",\n      \"text\": `ğŸ“Š JIRA ì‘ì—… í˜„í™© ë³´ê³  (${formattedDate} ê¸°ì¤€)`,\n      \"emoji\": true\n    }\n  },\n  { \"type\": \"divider\" },\n  \n  // ì§„í–‰ ì¤‘ì¸ ì‘ì—… ì„¹ì…˜\n  {\n    \"type\": \"section\",\n    \"text\": {\n      \"type\": \"mrkdwn\",\n      \"text\": `*ğŸ”¶ ì§„í–‰ ì¤‘ì¸ ì‘ì—… (IN PROGRESS)* - ì´ ${inProgressIssues.length}ê±´`\n    }\n  }\n];\n\n// ì§„í–‰ ì¤‘ì¸ ì‘ì—… ëª©ë¡ ì¶”ê°€\nif (inProgressIssues.length === 0) {\n  blocks.push({\n    \"type\": \"section\",\n    \"text\": {\n      \"type\": \"mrkdwn\",\n      \"text\": \"ğŸ“­ ì§„í–‰ ì¤‘ì¸ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤.\"\n    }\n  });\n} else {\n  inProgressIssues.forEach((issue, index) => {\n    const issueType = issue.fields.issuetype ? issue.fields.issuetype.name : 'Task';\n    const typeEmoji = issueTypeEmojis[issueType] || 'ğŸ“„';\n    const priorityEmoji = issue.fields.priority && issue.fields.priority.name ? \n      (priorityEmojis[issue.fields.priority.name] || 'âšªï¸') : 'âšªï¸';\n    \n    // ì´ìŠˆ ì œëª©ê³¼ ë§í¬  \n    blocks.push({\n      \"type\": \"section\",\n      \"text\": {\n        \"type\": \"mrkdwn\",\n        \"text\": `*${index+1}.* ${typeEmoji} ${priorityEmoji} *<${JIRA_DOMAIN}/browse/${issue.key}|${issue.key}>: ${issue.fields.summary}*`\n      }\n    });\n    \n    // ìƒíƒœ, ìš°ì„ ìˆœìœ„, ë‹´ë‹¹ì ì •ë³´ë¥¼ í•œ ì¤„ì— ê¹”ë”í•˜ê²Œ\n    const fields = [];\n    \n    // ìƒíƒœ ì •ë³´\n    fields.push({\n      \"type\": \"mrkdwn\",\n      \"text\": `*ìƒíƒœ:* ${issue.fields.status.name}`\n    });\n    \n    // ìš°ì„ ìˆœìœ„ ì •ë³´\n    if (issue.fields.priority && issue.fields.priority.name) {\n      fields.push({\n        \"type\": \"mrkdwn\",\n        \"text\": `*ìš°ì„ ìˆœìœ„:* ${issue.fields.priority.name}`\n      });\n    }\n    \n    // ë‹´ë‹¹ì ì •ë³´\n    if (issue.fields.assignee && issue.fields.assignee.displayName) {\n      fields.push({\n        \"type\": \"mrkdwn\",\n        \"text\": `*ë‹´ë‹¹ì:* ${issue.fields.assignee.displayName}`\n      });\n    }\n    \n    blocks.push({\n      \"type\": \"context\",\n      \"elements\": fields\n    });\n    \n    // ë§Œì•½ í•´ë‹¹ ì´ìŠˆì— ì„¤ëª…ì´ ìˆë‹¤ë©´ ì§§ê²Œ í‘œì‹œ (ì˜µì…˜)\n    if (issue.fields.description) {\n      let desc = issue.fields.description;\n      if (desc.length > 100) {\n        desc = desc.substring(0, 97) + '...';\n      }\n      blocks.push({\n        \"type\": \"context\",\n        \"elements\": [\n          {\n            \"type\": \"mrkdwn\",\n            \"text\": `ğŸ’¬ ${desc}`\n          }\n        ]\n      });\n    }\n    \n    // ë§ˆì§€ë§‰ í•­ëª©ì´ ì•„ë‹ˆë©´ êµ¬ë¶„ì„  ì¶”ê°€\n    if (index < inProgressIssues.length - 1) {\n      blocks.push({ \"type\": \"divider\" });\n    }\n  });\n}\n\n// í•  ì‘ì—… ì„¹ì…˜ í—¤ë”\nblocks.push(\n  { \"type\": \"divider\" },\n  {\n    \"type\": \"section\",\n    \"text\": {\n      \"type\": \"mrkdwn\",\n      \"text\": `*ğŸ”· ì•ìœ¼ë¡œ í•  ì‘ì—… (TO DO)* - ì´ ${todoIssues.length}ê±´`\n    }\n  }\n);\n\n// í•  ì‘ì—… ëª©ë¡ ì¶”ê°€\nif (todoIssues.length === 0) {\n  blocks.push({\n    \"type\": \"section\",\n    \"text\": {\n      \"type\": \"mrkdwn\",\n      \"text\": \"ğŸ“­ í•  ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤.\"\n    }\n  });\n} else {\n  todoIssues.forEach((issue, index) => {\n    const issueType = issue.fields.issuetype ? issue.fields.issuetype.name : 'Task';\n    const typeEmoji = issueTypeEmojis[issueType] || 'ğŸ“„';\n    const priorityEmoji = issue.fields.priority && issue.fields.priority.name ? \n      (priorityEmojis[issue.fields.priority.name] || 'âšªï¸') : 'âšªï¸';\n    \n    // ì´ìŠˆ ì œëª©ê³¼ ë§í¬\n    blocks.push({\n      \"type\": \"section\",\n      \"text\": {\n        \"type\": \"mrkdwn\",\n        \"text\": `*${index+1}.* ${typeEmoji} ${priorityEmoji} *<${JIRA_DOMAIN}/browse/${issue.key}|${issue.key}>: ${issue.fields.summary}*`\n      }\n    });\n    \n    // ìƒíƒœ, ìš°ì„ ìˆœìœ„, ë‹´ë‹¹ì ì •ë³´ë¥¼ í•œ ì¤„ì— ê¹”ë”í•˜ê²Œ\n    const fields = [];\n    \n    // ìƒíƒœ ì •ë³´\n    fields.push({\n      \"type\": \"mrkdwn\",\n      \"text\": `*ìƒíƒœ:* ${issue.fields.status.name}`\n    });\n    \n    // ìš°ì„ ìˆœìœ„ ì •ë³´\n    if (issue.fields.priority && issue.fields.priority.name) {\n      fields.push({\n        \"type\": \"mrkdwn\",\n        \"text\": `*ìš°ì„ ìˆœìœ„:* ${issue.fields.priority.name}`\n      });\n    }\n    \n    // ë‹´ë‹¹ì ì •ë³´\n    if (issue.fields.assignee && issue.fields.assignee.displayName) {\n      fields.push({\n        \"type\": \"mrkdwn\",\n        \"text\": `*ë‹´ë‹¹ì:* ${issue.fields.assignee.displayName}`\n      });\n    }\n    \n    blocks.push({\n      \"type\": \"context\",\n      \"elements\": fields\n    });\n    \n    // ë§Œì•½ í•´ë‹¹ ì´ìŠˆì— ë§ˆê°ì¼ì´ ìˆë‹¤ë©´ í‘œì‹œ\n    if (issue.fields.duedate) {\n      const dueDate = new Date(issue.fields.duedate);\n      const formattedDueDate = `${dueDate.getFullYear()}-${(dueDate.getMonth() + 1).toString().padStart(2, '0')}-${dueDate.getDate().toString().padStart(2, '0')}`;\n      \n      blocks.push({\n        \"type\": \"context\",\n        \"elements\": [\n          {\n            \"type\": \"mrkdwn\",\n            \"text\": `â° *ë§ˆê°ì¼:* ${formattedDueDate}`\n          }\n        ]\n      });\n    }\n    \n    // ë§ˆì§€ë§‰ í•­ëª©ì´ ì•„ë‹ˆë©´ êµ¬ë¶„ì„  ì¶”ê°€\n    if (index < todoIssues.length - 1) {\n      blocks.push({ \"type\": \"divider\" });\n    }\n  });\n}\n\n// ìš”ì•½ ì •ë³´ ì„¹ì…˜\nblocks.push(\n  { \"type\": \"divider\" },\n  {\n    \"type\": \"header\",\n    \"text\": {\n      \"type\": \"plain_text\",\n      \"text\": \"ğŸ“Œ ìš”ì•½\",\n      \"emoji\": true\n    }\n  },\n  {\n    \"type\": \"section\",\n    \"fields\": [\n      {\n        \"type\": \"mrkdwn\",\n        \"text\": `*ì „ì²´ ì‘ì—…:*\\n${jiraIssues.length}ê±´`\n      },\n      {\n        \"type\": \"mrkdwn\",\n        \"text\": `*ì§„í–‰ ì¤‘:*\\n${inProgressIssues.length}ê±´`\n      },\n      {\n        \"type\": \"mrkdwn\",\n        \"text\": `*í•  ì‘ì—…:*\\n${todoIssues.length}ê±´`\n      }\n    ]\n  },\n  // ë°”ë‹¥ê¸€ - ë³´ê³ ì„œ ìƒì„± ì‹œê°„\n  {\n    \"type\": \"context\",\n    \"elements\": [\n      {\n        \"type\": \"mrkdwn\",\n        \"text\": `â±ï¸ ë³´ê³ ì„œ ìƒì„± ì‹œê°„: ${new Date().toLocaleTimeString()}`\n      }\n    ]\n  }\n);\n\n// ê²°ê³¼ ë°˜í™˜\nreturn { blocks };"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[440,0],"id":"6d59d161-34fb-4ed4-a083-83a25fe67d85","name":"Jira To Slack Message"},{"parameters":{"content":"ğŸ“† JIRA ì‘ì—… í˜„í™© ìë™ ë³´ê³  ì›Œí¬í”Œë¡œìš° ğŸ“Š\n\nì´ n8n ì›Œí¬í”Œë¡œìš°ëŠ” ë§¤ì¼ ì•„ì¹¨ 9ì‹œì— ìë™ìœ¼ë¡œ JIRA ì‘ì—… í˜„í™©ì„ ìˆ˜ì§‘í•˜ì—¬\nSlack ì—”ì§€ë‹ˆì–´ë§ ì±„ë„ì— ë³´ê³ ì„œë¥¼ ì „ì†¡í•©ë‹ˆë‹¤.\n\nğŸ”¹ ì£¼ìš” êµ¬ì„± ìš”ì†Œ:\n  â° 09:00 íŠ¸ë¦¬ê±°: í‰ì¼ ì•„ì¹¨ 9ì‹œì— ì›Œí¬í”Œë¡œìš° ì‹¤í–‰\n  ğŸ” JIRA ê²€ìƒ‰: íŠ¹ì • ë‹´ë‹¹ìë“¤ì˜ ë¯¸ì™„ë£Œ ì‘ì—…(Story, Bug) ì¡°íšŒ\n  ğŸ’» ì½”ë“œ ë…¸ë“œ: JIRA ë°ì´í„°ë¥¼ Slack ë©”ì‹œì§€ í˜•ì‹ìœ¼ë¡œ ë³€í™˜\n  ğŸ“¢ Slack ë°œì‹ : í¬ë§·ëœ ì‘ì—… í˜„í™© ë³´ê³ ì„œë¥¼ ì±„ë„ì— ì „ì†¡\n\nâš¡ ì‘ì—… ìƒíƒœ êµ¬ë¶„:\n  ğŸ”¶ IN PROGRESS - ì§„í–‰ ì¤‘ì¸ ì‘ì—…\n  ğŸ”· TO DO - ì•ìœ¼ë¡œ í•  ì‘ì—…\n\nğŸ¯ ìš°ì„ ìˆœìœ„ í‘œì‹œ:\n  ğŸ”´ Highest  ğŸŸ  High  ğŸŸ¡ Medium  ğŸŸ¢ Low  ğŸ”µ Lowest","height":520,"width":1200},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-220,-360],"id":"518d00a1-2ab2-4220-bcb8-82ebf6feb6de","name":"Sticky Note"}],"connections":{"09:00 Trigger":{"main":[[{"node":"Get PMS Developer Jira Issues","type":"main","index":0}]]},"Get PMS Developer Jira Issues":{"main":[[{"node":"Jira To Slack Message","type":"main","index":0}]]},"Jira To Slack Message":{"main":[[{"node":"Slack","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Schedule Trigger":{"recurrenceRules":[]},"node:09:00 Schedule Trigger":{"recurrenceRules":[]},"node:17:00 Schedule Trigger":{"recurrenceRules":[]},"node:09:00 Trigger":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"1ccda6b6-eb3d-48c4-81dd-23e0c130942f","triggerCount":1,"tags":[],"safeName":"PMS Bot Jira ì‘ì—…í˜„í™©"}