{"createdAt":"2025-05-09T05:42:45.988Z","updatedAt":"2025-05-12T02:11:02.000Z","id":"vDy5yioN233ebq0N","name":"[COLO] Company Member Inquiry","active":false,"nodes":[{"parameters":{},"id":"d8d2dbf1-d02f-4a86-affb-ef9f6b4c4084","name":"Manual Trigger","type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-360,300]},{"parameters":{"url":"https://slack.com/api/usergroups.list","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $node[\"API KEY\"].data.slack_bot_oauth_token }}"}]},"options":{}},"id":"0208f0ef-a53a-45ff-a36c-a2e80642bdb9","name":"Get User Groups","type":"n8n-nodes-base.httpRequest","typeVersion":3,"position":[80,0]},{"parameters":{"functionCode":"const groups = $json.usergroups || [];\nreturn groups.map(group => ({\n  json: {\n    id: group.id,\n    handle: group.handle,\n    name: group.name\n  }\n}));"},"id":"f224a2bb-88da-4dba-b7aa-650390ab6151","name":"Extract Group Info","type":"n8n-nodes-base.function","typeVersion":1,"position":[300,0]},{"parameters":{"url":"https://slack.com/api/users.list","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $node[\"API KEY\"].data.slack_bot_oauth_token }}"}]},"options":{}},"id":"c1cd80f4-81ec-4856-ba23-3683dfc76cbf","name":"Get All Users","type":"n8n-nodes-base.httpRequest","typeVersion":3,"position":[80,200]},{"parameters":{"functionCode":"const users = $json.members || [];\n\nconst filterUsers = users\n  .filter(u => !u.deleted && !u.is_bot)\n  .map(u => ({\n    json: {\n      id: u.id,\n      real_name: u.real_name,\n      display_name: u.profile?.display_name || '',\n      email: u.profile?.email || ''\n    }\n  }));\n\nreturn filterUsers"},"id":"a9d2ac2d-785f-47bc-805e-e0cc9e96316b","name":"Extract Users","type":"n8n-nodes-base.function","typeVersion":1,"position":[300,200]},{"parameters":{"url":"https://slack.com/api/conversations.list?exclude_archived=true&limit=1000","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $node[\"API KEY\"].data.slack_bot_oauth_token }}"}]},"options":{}},"id":"72581474-28e4-42ca-a15f-faa8d3acfee7","name":"Get Channels","type":"n8n-nodes-base.httpRequest","typeVersion":3,"position":[80,400]},{"parameters":{"functionCode":"const channels = $json.channels || [];\nreturn channels.map(c => ({\n  json: {\n    id: c.id,\n    name: c.name,\n    is_private: c.is_private,\n    created: new Date(c.created * 1000).toISOString()\n  }\n}));"},"id":"19a4245b-612d-4d22-8823-852de77ce174","name":"Extract Channel Info","type":"n8n-nodes-base.function","typeVersion":1,"position":[300,400]},{"parameters":{"url":"https://api.github.com/orgs/colosseumcoinckr/members","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $node[\"API KEY\"].data.github_auth}}"},{"name":"Accept","value":"application/vnd.github+json"}]},"options":{}},"id":"24c7327c-5ee0-49be-9e8f-ca74ec68cd05","name":"Get Org Members","type":"n8n-nodes-base.httpRequest","typeVersion":3,"position":[80,600]},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1XfX5rudDarTzGtcS9gpQNjuGFr5N-H9JbuPsub3fdCY","mode":"list","cachedResultName":"n8n","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1XfX5rudDarTzGtcS9gpQNjuGFr5N-H9JbuPsub3fdCY/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":2117582414,"mode":"list","cachedResultName":"Slack Group","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1XfX5rudDarTzGtcS9gpQNjuGFr5N-H9JbuPsub3fdCY/edit#gid=2117582414"},"columns":{"mappingMode":"autoMapInputData","value":{},"matchingColumns":[],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"handle","displayName":"handle","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"name","displayName":"name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[520,0],"id":"75d436c7-515e-4e88-8bbc-7fd52891af47","name":"Slack Group Sheet","credentials":{"googleSheetsOAuth2Api":{"id":"MPSPnxNCQdbeGyDV","name":"Developjik1 Colo Workflow Google Sheets account"}}},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1XfX5rudDarTzGtcS9gpQNjuGFr5N-H9JbuPsub3fdCY","mode":"list","cachedResultName":"n8n","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1XfX5rudDarTzGtcS9gpQNjuGFr5N-H9JbuPsub3fdCY/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":1105777391,"mode":"list","cachedResultName":"Slack User","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1XfX5rudDarTzGtcS9gpQNjuGFr5N-H9JbuPsub3fdCY/edit#gid=1105777391"},"columns":{"mappingMode":"autoMapInputData","value":{},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"real_name","displayName":"real_name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"display_name","displayName":"display_name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"email","displayName":"email","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[520,200],"id":"5b45c307-c7e0-43d9-8a85-b00f138d0793","name":"Slack User Sheet","credentials":{"googleSheetsOAuth2Api":{"id":"MPSPnxNCQdbeGyDV","name":"Developjik1 Colo Workflow Google Sheets account"}}},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1XfX5rudDarTzGtcS9gpQNjuGFr5N-H9JbuPsub3fdCY","mode":"list","cachedResultName":"n8n","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1XfX5rudDarTzGtcS9gpQNjuGFr5N-H9JbuPsub3fdCY/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":454416367,"mode":"list","cachedResultName":"Slack Channel","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1XfX5rudDarTzGtcS9gpQNjuGFr5N-H9JbuPsub3fdCY/edit#gid=454416367"},"columns":{"mappingMode":"autoMapInputData","value":{},"matchingColumns":[],"schema":[],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[520,400],"id":"e728d12e-5b89-4594-98ac-c0f209628784","name":"Slack Channel Sheet","credentials":{"googleSheetsOAuth2Api":{"id":"MPSPnxNCQdbeGyDV","name":"Developjik1 Colo Workflow Google Sheets account"}}},{"parameters":{"jsCode":"// 입력 데이터: GitHub 조직 멤버 리스트\nconst members = $input.all();\n\nconst transformed = members.map(item => {\n  const user = item.json;\n  return {\n    login: user.login,\n    id: user.id,\n    html_url: user.html_url,\n  };\n});\n\nreturn transformed.map(data => ({ json: data }));"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[300,600],"id":"f16c71a3-47ba-4526-94ed-f0f946c98aca","name":"Extract Github Users Info"},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1XfX5rudDarTzGtcS9gpQNjuGFr5N-H9JbuPsub3fdCY","mode":"list","cachedResultName":"n8n","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1XfX5rudDarTzGtcS9gpQNjuGFr5N-H9JbuPsub3fdCY/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":1083927230,"mode":"list","cachedResultName":"Github User","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1XfX5rudDarTzGtcS9gpQNjuGFr5N-H9JbuPsub3fdCY/edit#gid=1083927230"},"columns":{"mappingMode":"autoMapInputData","value":{},"matchingColumns":[],"schema":[{"id":"login","displayName":"login","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"html_url","displayName":"html_url","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[520,600],"id":"329a669b-11a8-48af-98f4-6e152132fc32","name":"Github Users Sheet","credentials":{"googleSheetsOAuth2Api":{"id":"MPSPnxNCQdbeGyDV","name":"Developjik1 Colo Workflow Google Sheets account"}}},{"parameters":{"content":"## ✅ 워크플로우 설명 - Slack & GitHub 데이터 → Google Sheets 저장\n\n### 1. 🔐 API 키 불러오기\n- 서브 워크플로우 `[Sub] Get API Key` 실행\n- Slack Bot Token & GitHub Token 반환\n- 이후 노드에서 `{{ $node[\"API KEY\"].data.xxx }}` 방식으로 참조\n\n---\n\n### 2. 📡 Slack 데이터 수집\n- **User Groups (`usergroups.list`)**\n  - `id`, `handle`, `name` 추출 → `Slack Group` 시트 저장\n- **Users (`users.list`)**\n  - 삭제되지 않고 봇이 아닌 사용자만 필터\n  - `real_name`, `display_name`, `email` 추출 → `Slack User` 시트 저장\n- **Channels (`conversations.list`)**\n  - 비활성화된 채널 제외 후 `id`, `name`, `is_private`, 생성일 추출 → `Slack Channel` 시트 저장\n\n---\n\n### 3. 🧑‍💻 GitHub 조직 멤버 수집\n- `colosseumcoinckr` 조직의 멤버 리스트 조회\n- `login`, `id`, `html_url` 추출 → `Github User` 시트 저장\n\n---\n\n### 4. 📝 저장 방식\n- Google Sheets 문서: `n8n`\n- 저장 시트: Slack Group / Slack User / Slack Channel / Github User\n- 방식: `appendOrUpdate` (중복 시 병합, 없으면 추가)\n\n---\n\n### ⚙️ 트리거 방식\n- `Manual Trigger` 사용 (수동 실행)\n- 주기적 실행 원할 경우 `Cron` 노드로 교체 가능","height":1400,"width":1620},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-680,-640],"id":"3769ae14-704b-4126-900b-5238e935a011","name":"Sticky Note"},{"parameters":{"workflowId":{"__rl":true,"value":"uGqCptWtD45pUJt4","mode":"list","cachedResultName":"[Sub] Get API Key"},"workflowInputs":{"mappingMode":"defineBelow","value":{},"matchingColumns":[],"schema":[],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[-160,300],"id":"1be02b05-36bb-4b8a-adee-93eb6f7aae53","name":"API KEY"}],"connections":{"Manual Trigger":{"main":[[{"node":"API KEY","type":"main","index":0}]]},"Get User Groups":{"main":[[{"node":"Extract Group Info","type":"main","index":0}]]},"Get All Users":{"main":[[{"node":"Extract Users","type":"main","index":0}]]},"Get Channels":{"main":[[{"node":"Extract Channel Info","type":"main","index":0}]]},"Get Org Members":{"main":[[{"node":"Extract Github Users Info","type":"main","index":0}]]},"Extract Users":{"main":[[{"node":"Slack User Sheet","type":"main","index":0}]]},"Extract Group Info":{"main":[[{"node":"Slack Group Sheet","type":"main","index":0}]]},"Extract Channel Info":{"main":[[{"node":"Slack Channel Sheet","type":"main","index":0}]]},"Extract Github Users Info":{"main":[[{"node":"Github Users Sheet","type":"main","index":0}]]},"API KEY":{"main":[[{"node":"Get User Groups","type":"main","index":0},{"node":"Get All Users","type":"main","index":0},{"node":"Get Channels","type":"main","index":0},{"node":"Get Org Members","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"d9fbf816-b9c0-4ffa-8058-eaf19981df25","triggerCount":0,"tags":[]}