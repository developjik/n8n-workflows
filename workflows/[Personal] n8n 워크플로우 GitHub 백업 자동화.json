{"createdAt":"2025-05-07T02:41:14.567Z","updatedAt":"2025-05-13T15:46:25.000Z","id":"yqdERCZ8ptmWMgVH","name":"[Personal] n8n ÏõåÌÅ¨ÌîåÎ°úÏö∞ GitHub Î∞±ÏóÖ ÏûêÎèôÌôî","active":true,"nodes":[{"parameters":{"content":"# üîÑ n8n ÏõåÌÅ¨ÌîåÎ°úÏö∞ GitHub Î∞±ÏóÖ ÏûêÎèôÌôî\n\nÏù¥ ÏõåÌÅ¨ÌîåÎ°úÏö∞Îäî n8n Ïù∏Ïä§ÌÑ¥Ïä§Ïùò Î™®Îì† ÏõåÌÅ¨ÌîåÎ°úÏö∞Î•º ÏûêÎèôÏúºÎ°ú GitHub Ï†ÄÏû•ÏÜåÏóê Î∞±ÏóÖÌï©ÎãàÎã§.\n\n## ‚öôÔ∏è ÏûëÎèô Î∞©Ïãù\n1. Îß§Ïùº Ï†ÄÎÖÅ 9Ïãú(21:00)Ïóê Ïã§Ìñâ\n2. n8n APIÏóêÏÑú Î™®Îì† ÏõåÌÅ¨ÌîåÎ°úÏö∞ Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞\n3. Í∞Å ÏõåÌÅ¨ÌîåÎ°úÏö∞ÎßàÎã§:\n  - GitHub Ï†ÄÏû•ÏÜåÏóêÏÑú ÌååÏùº Ï°¥Ïû¨ Ïó¨Î∂Ä ÌôïÏù∏\n  - ÏóÜÏúºÎ©¥ ‚Üí ÏÉà ÌååÏùº ÏÉùÏÑ± Î∞è Ïª§Î∞ã\n  - ÏûàÏúºÎ©¥ ‚Üí ÎÇ¥Ïö© ÎπÑÍµê ÌõÑ Î≥ÄÍ≤ΩÎêú Í≤ΩÏö∞ÏóêÎßå ÏóÖÎç∞Ïù¥Ìä∏\n4. Î∞±ÏóÖ Í≤∞Í≥ºÎ•º Ïù¥Î©îÏùºÎ°ú ÌÜµÎ≥¥ (ÏÑ±Í≥µ/Ïã§Ìå® ÌÜµÍ≥Ñ)\n\n## üìÅ Ï†ÄÏû• Ï†ïÎ≥¥\n- Í≤ΩÎ°ú: `workflows/[ÏõåÌÅ¨ÌîåÎ°úÏö∞Ïù¥Î¶Ñ].json`\n- Ï†ÄÏû•ÏÜå: `developjik/n8n-workflows`\n- Ïª§Î∞ã Î©îÏãúÏßÄ: `[N8N Backup] [ÏõåÌÅ¨ÌîåÎ°úÏö∞Ïù¥Î¶Ñ].json`\n\n## üí° Ï£ºÏöî Í∞úÏÑ†ÏÇ¨Ìï≠\n- Î≥¥Ïïà ÌÜ†ÌÅ∞ Í¥ÄÎ¶¨ - Credentials Í∏∞Îä•ÏúºÎ°ú ÏïàÏ†ÑÌïòÍ≤å Ï≤òÎ¶¨\n- Í∞ïÌôîÎêú Ïò§Î•ò Ï≤òÎ¶¨ - Í∞úÎ≥Ñ ÏõåÌÅ¨ÌîåÎ°úÏö∞ Î∞±ÏóÖ Ïã§Ìå® ÏãúÏóêÎèÑ Ï†ÑÏ≤¥ ÌîÑÎ°úÏÑ∏Ïä§ Í≥ÑÏÜç ÏßÑÌñâ\n- Í≤∞Í≥º Î™®ÎãàÌÑ∞ÎßÅ - ÏÑ±Í≥µ/Ïã§Ìå® ÌÜµÍ≥Ñ Î∞è ÏÉÅÏÑ∏ Ïò§Î•ò Î≥¥Í≥†\n- ÌååÏùºÎ™Ö ÏïàÏ†ÑÏÑ± - ÌäπÏàòÎ¨∏Ïûê ÏûêÎèô Ï≤òÎ¶¨Î°ú ÌååÏùº ÏãúÏä§ÌÖú Ìò∏ÌôòÏÑ± Í∞ïÌôî\n\n## üõ†Ô∏è ÌïÑÏöîÌïú ÏÑ§Ï†ï\n- GitHub API ÏûêÍ≤© Ï¶ùÎ™Ö (Ï†ÄÏû•ÏÜå Ï†ëÍ∑º Í∂åÌïú ÌïÑÏöî)\n- n8n API ÏûêÍ≤© Ï¶ùÎ™Ö (ÏõåÌÅ¨ÌîåÎ°úÏö∞ Î™©Î°ù Ï°∞Ìöå Í∂åÌïú ÌïÑÏöî)\n\n## üí™ ÌôúÏö© Ïù¥Ï†ê\n- ÏõåÌÅ¨ÌîåÎ°úÏö∞ ÏûêÎèô Î≤ÑÏ†Ñ Í¥ÄÎ¶¨\n- Î≥ÄÍ≤ΩÏÇ¨Ìï≠Ïù¥ ÏûàÎäî ÏõåÌÅ¨ÌîåÎ°úÏö∞Îßå ÏóÖÎç∞Ïù¥Ìä∏\n- Ïã§ÏàòÎ°ú Ïù∏Ìïú ÏõåÌÅ¨ÌîåÎ°úÏö∞ ÏÜêÏã§ Î∞©ÏßÄ\n- Î≥ÄÍ≤Ω Ïù¥Î†• Ï∂îÏ†Å Í∞ÄÎä•","height":1640,"width":3320},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-520,-800],"id":"1d6daf28-f221-4211-a441-c5c8294ba689","name":"Sticky Note5"},{"parameters":{"rule":{"interval":[{"triggerAtHour":21}]}},"id":"54dcf51c-e72b-46ad-8ce6-595ffe0de835","name":"Schedule Trigger","type":"n8n-nodes-base.scheduleTrigger","position":[-700,555],"typeVersion":1.2},{"parameters":{"values":{"string":[{"name":"repo.owner","value":"developjik"},{"name":"repo.name","value":"n8n-workflows"},{"name":"repo.path","value":"workflows/"},{"name":"timestamp","value":"={{ $now }}"},{"name":"backup_stats","value":"{{ {\"total\": 0, \"created\": 0, \"updated\": 0, \"unchanged\": 0, \"failed\": 0} }}"}]},"options":{}},"id":"27c4fad3-8fdf-40bb-a10e-1373e6946c11","name":"Globals","type":"n8n-nodes-base.set","position":[-480,555],"typeVersion":1},{"parameters":{"filters":{},"requestOptions":{}},"id":"65caa249-f277-4661-b35f-736cb36811a1","name":"n8n","type":"n8n-nodes-base.n8n","position":[-260,555],"typeVersion":1,"credentials":{"n8nApi":{"id":"521LRQgwmRwHq1EC","name":"developjik n8n account"}},"continueOnFail":true},{"parameters":{"jsCode":"// ÏõåÌÅ¨ÌîåÎ°úÏö∞ Îç∞Ïù¥ÌÑ∞ Ïú†Ìö®ÏÑ± Í≤ÄÏ¶ù Î∞è Ï≤òÎ¶¨\nconst items = $input.all();\nconst validItems = [];\n\nfor (const item of items) {\n  if (!item.json || !item.json.name) {\n    // Ïù¥Î¶ÑÏù¥ ÏóÜÎäî ÏõåÌÅ¨ÌîåÎ°úÏö∞Îäî Í±¥ÎÑàÎõ∞Í∏∞\n    continue;\n  }\n  \n  // ÏõåÌÅ¨ÌîåÎ°úÏö∞ Ïù¥Î¶ÑÏóêÏÑú ÌååÏùºÎ™ÖÏúºÎ°ú ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÎäî Î¨∏Ïûê Ï†úÍ±∞\n  // const safeName = item.json.name.replace(/[\\/?*:;{}\\\\\\[\\]]/g, '');\n  \n  // ÏïàÏ†ÑÌïú ÌååÏùºÎ™Ö Ï∂îÍ∞Ä\n  // item.json.name = safeName;\n  \n  validItems.push(item);\n}\n\n// Ï†ÑÏ≤¥ ÏõåÌÅ¨ÌîåÎ°úÏö∞ Ïàò ÏóÖÎç∞Ïù¥Ìä∏\nconst stats = $node[\"Globals\"].json.backup_stats;\nstats.total = validItems.length;\n\nreturn [\n  ...validItems\n];"},"id":"b36644dd-018a-4630-9f60-fb9f3cbdb5b4","name":"Prepare Workflows","type":"n8n-nodes-base.code","position":[-40,555],"typeVersion":1},{"parameters":{"options":{}},"id":"2c665cf3-0a29-4761-b3f4-aa72ffad1268","name":"Loop Over Items","type":"n8n-nodes-base.splitInBatches","position":[180,555],"executeOnce":false,"typeVersion":3},{"parameters":{"resource":"file","operation":"get","owner":"={{$node[\"Globals\"].json[\"repo\"][\"owner\"]}}","repository":"={{$node[\"Globals\"].json[\"repo\"][\"name\"]}}","filePath":"={{$node[\"Globals\"].json[\"repo\"][\"path\"]}}{{ $json.name }}.json","asBinaryProperty":false,"additionalParameters":{}},"id":"3d2c3000-472b-4af8-b8bb-acae2a671685","name":"GitHub","type":"n8n-nodes-base.github","position":[520,560],"typeVersion":1,"alwaysOutputData":true,"webhookId":"b4f93260-b316-4043-9711-eb2319d8901e","credentials":{"githubApi":{"id":"ztjSZnhw13h8m4UG","name":"Developjik GitHub account"}},"continueOnFail":true},{"parameters":{"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"16a9182d-059d-4774-ba95-654fb4293fdb","operator":{"type":"string","operation":"notExists","singleValue":true},"leftValue":"={{ $json.error }}","rightValue":""}]},"options":{}},"id":"9f544663-b4de-4cf1-9663-5a2553f07188","name":"If","type":"n8n-nodes-base.if","position":[720,560],"typeVersion":2.2},{"parameters":{"jsCode":"let items = $input.all();\n\nfor (const item of items) {\n    try {\n        // Base64 ÎîîÏΩîÎî©\n        if (item.json.content) {\n            item.json.content = Buffer.from(item.json.content, 'base64').toString('utf8');\n        }\n        \n        // Ïò§Î•ò ÌëúÏãú Ï†úÍ±∞\n        if (item.json.error) {\n            delete item.json.error;\n        }\n    } catch (error) {\n        // ÎîîÏΩîÎî© Ïò§Î•ò Ï≤òÎ¶¨\n        item.json.error = `Decoding error: ${error.message}`;\n    }\n}\n\nreturn items;\n"},"id":"5fd0a849-6096-4be5-939c-7e85e2dab19a","name":"Decode Content","type":"n8n-nodes-base.code","position":[920,260],"typeVersion":2},{"parameters":{"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"e0c66624-429a-4f1f-bf7b-1cc1b32bad7b","operator":{"type":"string","operation":"notEquals"},"leftValue":"={{ $json.content }}","rightValue":"={{ $('Loop Over Items').item.json.toJsonString() }}"}]},"options":{}},"id":"a6608273-0cb3-436d-8983-e77a98d43bde","name":"Check If Changed","type":"n8n-nodes-base.if","position":[1060,380],"typeVersion":2.2},{"parameters":{"resource":"file","operation":"edit","owner":"={{$node[\"Globals\"].json[\"repo\"][\"owner\"]}}","repository":"={{$node[\"Globals\"].json[\"repo\"][\"name\"]}}","filePath":"={{$node[\"Globals\"].json[\"repo\"][\"path\"]}}{{ $('Loop Over Items').item.json.name }}.json","fileContent":"={{ $('Loop Over Items').item.json.toJsonString() }}","commitMessage":"[N8N Backup] {{ $('Loop Over Items').item.json.name }}.json"},"id":"3d9667ed-2d86-42b5-9302-26e91306892e","name":"Update file","type":"n8n-nodes-base.github","position":[1280,280],"typeVersion":1,"webhookId":"92bdefdf-ec3e-42a7-a5ba-2797432c67e3","credentials":{"githubApi":{"id":"ztjSZnhw13h8m4UG","name":"Developjik GitHub account"}},"continueOnFail":true},{"parameters":{"resource":"file","owner":"={{$node[\"Globals\"].json[\"repo\"][\"owner\"]}}","repository":"={{$node[\"Globals\"].json[\"repo\"][\"name\"]}}","filePath":"={{$node[\"Globals\"].json[\"repo\"][\"path\"]}}{{ $('Loop Over Items').item.json.name }}.json","fileContent":"={{ $('Loop Over Items').item.json.toJsonString() }}","commitMessage":"[N8N Backup] {{ $('Loop Over Items').item.json.name }}.json"},"id":"6f8bd1f3-ad1e-4bf9-b0f1-431a19bc3652","name":"Create new file","type":"n8n-nodes-base.github","position":[1280,680],"typeVersion":1,"webhookId":"9b2404d9-90d8-412d-8113-45a9ce3b2a15","credentials":{"githubApi":{"id":"ztjSZnhw13h8m4UG","name":"Developjik GitHub account"}},"continueOnFail":true},{"parameters":{"jsCode":"// Î∞±ÏóÖ Í≤∞Í≥º ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏\nconst stats = $node[\"Globals\"].json.backup_stats;\nconst item = $input.first();\n\n// ÌååÏùº ÏÉùÏÑ± Í≤∞Í≥º Ï≤òÎ¶¨\nif (item.json.error) {\n  stats.failed++;\n} else {\n  stats.created++;\n}\n\nreturn [\n  {\n    json: {\n      workflow: $('Loop Over Items').first().json.name,\n      operation: \"create\",\n      status: item.json.error ? \"failed\" : \"success\",\n      error: item.json.error,\n      stats: stats\n    }\n  }\n];"},"id":"c679f2da-dc61-4f14-93f0-5f9de7920bc3","name":"Process Create Result","type":"n8n-nodes-base.code","position":[1500,680],"typeVersion":1},{"parameters":{"jsCode":"// Î∞±ÏóÖ Í≤∞Í≥º ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏\nconst stats = $node[\"Globals\"].json.backup_stats;\nconst item = $input.first();\n\n// ÌååÏùº ÏóÖÎç∞Ïù¥Ìä∏ Í≤∞Í≥º Ï≤òÎ¶¨\nif (item.json.error) {\n  stats.failed++;\n} else {\n  stats.updated++;\n}\n\nreturn [\n  {\n    json: {\n      workflow: $('Loop Over Items').first().json.name,\n      operation: \"update\",\n      status: item.json.error ? \"failed\" : \"success\",\n      error: item.json.error,\n      stats: stats\n    }\n  }\n];"},"id":"b810a138-94d0-483c-9674-34d87abe5409","name":"Process Update Result","type":"n8n-nodes-base.code","position":[1500,280],"typeVersion":1},{"parameters":{"jsCode":"// Î≥ÄÍ≤Ω ÏóÜÏùå ÏÉÅÌÉú Ï≤òÎ¶¨\nconst stats = $node[\"Globals\"].json.backup_stats;\nstats.unchanged++;\n\nreturn [\n  {\n    json: {\n      workflow: $('Loop Over Items').first().json.name,\n      operation: \"check\",\n      status: \"unchanged\",\n      stats: stats\n    }\n  }\n];"},"id":"9b59d30b-154d-4eca-ba6b-ddb6ca6a5ce8","name":"No Changes","type":"n8n-nodes-base.code","position":[1500,480],"typeVersion":1},{"parameters":{},"id":"24f90621-95f8-4e49-b876-0d8f03759e33","name":"Merge Results","type":"n8n-nodes-base.merge","position":[1720,680],"typeVersion":2},{"parameters":{"amount":3,"unit":"seconds"},"id":"64567044-8b34-42c0-a22b-bcf2176a41a6","name":"Wait","type":"n8n-nodes-base.wait","position":[1940,680],"typeVersion":1,"webhookId":"01497a17-2a45-4a57-aa74-e53d183a122d"},{"parameters":{"jsCode":"// ÏµúÏ¢Ö Î∞±ÏóÖ Í≤∞Í≥º ÏöîÏïΩ\nconst items = $input.all();\nconst firstItem = items[0];\n\n// Î∞±ÏóÖ ÌÜµÍ≥Ñ ÏàòÏßë\nconst stats = firstItem.json.stats;\n\n// Ïù¥Î©îÏùºÎ°ú Î≥¥ÎÇº ÎÇ¥Ïö© ÏÉùÏÑ±\nconst timestamp = new Date().toISOString();\nconst summary = {\n  json: {\n    timestamp: timestamp,\n    backup_results: {\n      total_workflows: stats.total,\n      created: stats.created,\n      updated: stats.updated,\n      unchanged: stats.unchanged,\n      failed: stats.failed,\n      success_rate: `${Math.round(((stats.created + stats.updated + stats.unchanged) / stats.total) * 100)}%`\n    },\n    failed_workflows: items\n      .filter(item => item.json.status === \"failed\" || item.json.status === \"error\")\n      .map(item => ({\n        name: item.json.workflow,\n        operation: item.json.operation,\n        error: item.json.error\n      }))\n  }\n};\n\nreturn [summary];"},"id":"8ea97941-72cf-4a12-aa35-d4c10d2504e3","name":"Prepare Summary","type":"n8n-nodes-base.code","position":[2160,680],"typeVersion":1},{"parameters":{"jsCode":"// ÌååÏùº Ï°¥Ïû¨ÌïòÏßÄ ÏïäÏùå Ï≤òÎ¶¨\nconst stats = $node[\"Globals\"].json.backup_stats;\nstats.failed++;\n\nreturn [\n  {\n    json: {\n      workflow: $('Loop Over Items').first().json.name,\n      operation: \"check\",\n      status: \"error\",\n      error: $input.first().json.error,\n      stats: stats\n    }\n  }\n];"},"id":"0176b85a-e8ca-4885-9513-6d921337cc32","name":"Process Error","type":"n8n-nodes-base.code","position":[1500,980],"typeVersion":1},{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-600,1140],"id":"da908b1a-9dd5-410e-bd3e-bf4db7a93ff7","name":"When clicking ‚ÄòTest workflow‚Äô"},{"parameters":{"values":{"string":[{"name":"repo.owner","value":"developjik"},{"name":"repo.name","value":"n8n-workflows"},{"name":"repo.path","value":"workflows/"},{"name":"timestamp","value":"={{ $now }}"},{"name":"backup_stats","value":"{{ {\"total\": 0, \"created\": 0, \"updated\": 0, \"unchanged\": 0, \"failed\": 0} }}"}]},"options":{}},"id":"f433d2b4-c3b3-43d9-a341-83efff7a5071","name":"Globals1","type":"n8n-nodes-base.set","position":[-300,1120],"typeVersion":1},{"parameters":{"url":"=https://api.github.com/repos/{{ $json.repo.owner }}/{{ $json.repo.name }}/contents/{{ $json.repo.path }}","authentication":"genericCredentialType","genericAuthType":"httpBearerAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[420,1120],"id":"853cdd3b-ae61-43d0-844f-47d8d7c62e53","name":"HTTP Request","credentials":{"httpBearerAuth":{"id":"IMdXSClR7SYVZXdl","name":"[Personal] developjik Github"}}}],"connections":{"Schedule Trigger":{"main":[[{"node":"Globals","type":"main","index":0}]]},"Globals":{"main":[[{"node":"n8n","type":"main","index":0}]]},"n8n":{"main":[[{"node":"Prepare Workflows","type":"main","index":0}]]},"Prepare Workflows":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Loop Over Items":{"main":[[],[{"node":"GitHub","type":"main","index":0}]]},"GitHub":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"Decode Content","type":"main","index":0}],[{"node":"Create new file","type":"main","index":0}]]},"Decode Content":{"main":[[{"node":"Check If Changed","type":"main","index":0}]]},"Check If Changed":{"main":[[{"node":"Update file","type":"main","index":0}],[{"node":"No Changes","type":"main","index":0}]]},"Update file":{"main":[[{"node":"Process Update Result","type":"main","index":0}]]},"Create new file":{"main":[[{"node":"Process Create Result","type":"main","index":0}]]},"Process Create Result":{"main":[[{"node":"Merge Results","type":"main","index":0}]]},"Process Update Result":{"main":[[{"node":"Merge Results","type":"main","index":0}]]},"No Changes":{"main":[[{"node":"Merge Results","type":"main","index":0}]]},"Merge Results":{"main":[[{"node":"Loop Over Items","type":"main","index":0},{"node":"Wait","type":"main","index":0}]]},"Wait":{"main":[[{"node":"Prepare Summary","type":"main","index":0}]]},"Prepare Summary":{"main":[[]]},"Process Error":{"main":[[{"node":"Merge Results","type":"main","index":0}]]},"When clicking ‚ÄòTest workflow‚Äô":{"main":[[{"node":"Globals1","type":"main","index":0}]]},"Globals1":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Schedule Trigger":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"61e7de46-ff53-46fe-af9a-0b0ed56d9d3d","triggerCount":1,"tags":[]}