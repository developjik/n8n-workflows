{"createdAt":"2025-04-16T04:22:08.092Z","updatedAt":"2025-05-12T02:10:34.000Z","id":"4mvHVAF3QOFaqLZT","name":"[COLO] InProgress JIRA ìë™ ë³´ê³ ","active":true,"nodes":[{"parameters":{"select":"channel","channelId":{"__rl":true,"value":"={{$node[\"Set Excel Row Variables\"].json.slack_chat}}","mode":"id"},"messageType":"block","blocksUi":"={{ $json }}","text":"= ","otherOptions":{}},"type":"n8n-nodes-base.slack","typeVersion":2.3,"position":[2000,200],"id":"2f3553e7-994b-4132-97a1-4427afa21a48","name":"Slack","webhookId":"9fe89c7c-b2e2-4562-8c45-c603b997a890","credentials":{"slackApi":{"id":"Bqw9EwOIkH7skn99","name":"PMS BOT"}}},{"parameters":{"rule":{"interval":[{"field":"weeks","triggerAtDay":[1,2,3,4,5],"triggerAtHour":9}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-420,175],"id":"df555a2d-6360-4cf1-864d-9412de584355","name":"09:00 Trigger"},{"parameters":{"content":"## ğŸ“Œ JIRA ë‹´ë‹¹ìë³„ ì§„í–‰ì¤‘ ì‘ì—… ìë™ ë³´ê³  ì›Œí¬í”Œë¡œìš°\n\nì´ ì›Œí¬í”Œë¡œìš°ëŠ” Google Spreadsheetì— ì •ì˜ëœ ê° ë‹´ë‹¹ìì˜ Jira ì‘ì—…ì„ ì¡°íšŒí•˜ì—¬,  \n**ì§„í–‰ ì¤‘ì¸ ì‘ì—…ì´ ìˆì„ ê²½ìš° Slack ì±„ë„ë¡œ ìë™ ë³´ê³ **í•©ë‹ˆë‹¤.\n\n---\n\n### ğŸ§© ì£¼ìš” êµ¬ì„±\n\n- **09:00 Trigger**  \n  ë§¤ì£¼ í‰ì¼(ì›”~ê¸ˆ) ì˜¤ì „ 9ì‹œì— ì›Œí¬í”Œë¡œìš° ì‹¤í–‰\n\n- **Get COLO Variables**  \n  í™˜ê²½ë³€ìˆ˜ (ì˜ˆ: JIRA ë„ë©”ì¸ ë“±)ë¥¼ ë³„ë„ ì›Œí¬í”Œë¡œìš°ì—ì„œ ê°€ì ¸ì˜´\n\n- **Google Spreadsheet Row ìˆ˜ì§‘**  \n  ë‹´ë‹¹ì ì´ë¦„, Slack ì±„ë„ ID, Slack ê·¸ë£¹ ID ë“±ì˜ ë©”íƒ€ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°\n\n- **Jira ì´ìŠˆ ì¡°íšŒ**  \n  `In Progress` ìƒíƒœì˜ Story ë˜ëŠ” Bug ì´ìŠˆë§Œ í•„í„°ë§\n\n- **ì¡°ê±´ ë¶„ê¸° (IF ë…¸ë“œ)**  \n  - ì´ìŠˆê°€ **ìˆì„ ê²½ìš°**: ìƒì„¸ ì´ìŠˆ ë¸”ë¡ êµ¬ì„± í›„ Slack ë©”ì‹œì§€ ì „ì†¡  \n  - ì´ìŠˆê°€ **ì—†ì„ ê²½ìš°**: \"í˜„ì¬ ì§„í–‰ ì¤‘ ì‘ì—… ì—†ìŒ\" ë©”ì‹œì§€ ì „ì†¡\n\n- **Slack ë©”ì‹œì§€ ì „ì†¡**  \n  ì±„ë„ ì§€ì • ë° `<subteam>` IDë¥¼ í†µí•œ ê·¸ë£¹ ë©˜ì…˜ í¬í•¨ ë©”ì‹œì§€ ì „ì†¡\n\n---\n\n### ğŸ§¾ ë©”ì‹œì§€ í¬ë§·\n\n- ì´ìŠˆë³„ë¡œ ë¸”ë¡ í˜•íƒœë¡œ êµ¬ì„±ëœ ì‹œê°ì  ë©”ì‹œì§€\n- ìƒíƒœ, ìš°ì„ ìˆœìœ„, ë‹´ë‹¹ì, ìš”ì•½, ë§ˆê°ì¼ ë“± ì£¼ìš” ì •ë³´ í¬í•¨\n- ì´ìŠˆ ì—†ì„ ê²½ìš°ì—ë„ ë™ì¼í•œ í¬ë§·ì˜ ê³µì§€ ë©”ì‹œì§€ ë°œì†¡\n- ë§ˆì§€ë§‰ì— Slack Mentions (`<!subteam^ID>`) í¬í•¨\n\n---\n\n> ğŸ“£ ì´ ì›Œí¬í”Œë¡œìš°ëŠ” íŒ€ ë‹¨ìœ„ Jira ìƒíƒœ ê´€ë¦¬ë¥¼ ìë™í™”í•˜ê³   \n> ë°˜ë³µì ì¸ Slack ë³´ê³ ë¥¼ ì¤„ì´ëŠ” ë° íš¨ê³¼ì ì…ë‹ˆë‹¤.","height":1300,"width":2900},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-700,-820],"id":"518d00a1-2ab2-4220-bcb8-82ebf6feb6de","name":"Sticky Note"},{"parameters":{"options":{}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[680,175],"id":"c7598f81-a987-4201-b0c2-a9494777ad26","name":"Loop Over Items"},{"parameters":{"jsCode":"return $input.first().json.data;"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[460,175],"id":"e9156dbc-da95-49b1-a355-b170501893a6","name":"Get Excel Row Data"},{"parameters":{"operation":"getAll","returnAll":true,"options":{"jql":"=assignee = {{ $json.name }} AND issuetype IN (Story, Bug) AND statusCategory = \"In Progress\""}},"id":"8d0b159c-c8e3-4d68-abfe-c160b22bbb81","name":"Get Developer Jira Issues","type":"n8n-nodes-base.jira","position":[1120,100],"typeVersion":1,"alwaysOutputData":true,"credentials":{"jiraSoftwareCloudApi":{"id":"jd9f8LcXIUpGLHG7","name":"Colo Developjik1 Jira SW Cloud account"}}},{"parameters":{"workflowId":{"__rl":true,"value":"uGqCptWtD45pUJt4","mode":"list","cachedResultName":"[Sub] Get COLO Variables"},"workflowInputs":{"mappingMode":"defineBelow","value":{},"matchingColumns":[],"schema":[],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[-200,175],"id":"0ab6853d-54f6-449d-84a0-52a22674861f","name":"Get COLO Variables"},{"parameters":{"assignments":{"assignments":[{"id":"de5132bb-1334-4c78-b840-2d404ea39dbd","name":"name","value":"={{ $json.name }}","type":"string"},{"id":"d9479c6f-2143-47e8-97b7-bd395836768c","name":"row_number","value":"={{ $json.row_number }}","type":"string"},{"id":"79e18502-1172-44da-83d9-cfdb42da4100","name":"slack_chat","value":"={{ $json.slack_chat }}","type":"string"},{"id":"c01d0647-1dae-4118-b2be-098c26da3806","name":"slack_group","value":"={{ $json.slack_group }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[900,100],"id":"0477679f-3683-43cf-bccb-ec7be8ddd3be","name":"Set Excel Row Variables"},{"parameters":{"jsCode":"const items = $input.all();\nconst JIRA_DOMAIN = $node['Get COLO Variables'].json.jira_domain;\n\n// ì´ëª¨ì§€ ë§¤í•‘\nconst PRIORITY_EMOJI = {\n  Highest: 'ğŸ”´',\n  High: 'ğŸŸ ',\n  Medium: 'ğŸŸ¡',\n  Low: 'ğŸŸ¢',\n  Lowest: 'ğŸ”µ'\n};\n\nconst ISSUE_TYPE_EMOJI = {\n  Bug: 'ğŸ',\n  Story: 'ğŸ“',\n  Task: 'âœ…',\n  Epic: 'ğŸ†',\n  'Sub-task': 'ğŸ“'\n};\n\n// ë‚ ì§œ í¬ë§·\nconst today = new Date();\nconst formattedDate = `${today.getFullYear()}ë…„ ${today.getMonth() + 1}ì›” ${today.getDate()}ì¼`;\n\n// ë¸”ë¡ ë°°ì—´\nconst blocks = [];\n\n// ì´ìŠˆ ë¸”ë¡ ìƒì„±\nfunction formatIssueBlock(issue, index) {\n  const type = issue.fields?.issuetype?.name || 'Task';\n  const priority = issue.fields?.priority?.name || 'None';\n  const assignee = issue.fields?.assignee?.displayName || 'Unassigned';\n  const summary = issue.fields?.summary || '(ì œëª© ì—†ìŒ)';\n  let desc = (issue.fields?.description || '').split('\\n')[0]\n    .replace(/\\*|_/g, '')\n    .replace(/\\[.*?\\|.*?$/g, '')\n    .substring(0, 80);\n  const dueDate = issue.fields?.duedate ? `â° *ë§ˆê°ì¼:* ${issue.fields.duedate}` : null;\n\n  const sectionBlock = {\n    type: 'section',\n    text: {\n      type: 'mrkdwn',\n      text: `*${index + 1}.* ${ISSUE_TYPE_EMOJI[type] || 'ğŸ“„'} ${PRIORITY_EMOJI[priority] || 'âšªï¸'} *<${JIRA_DOMAIN}/browse/${issue.key}|${issue.key}>: ${summary}*`\n    }\n  };\n\n  const context = [\n    { type: 'mrkdwn', text: `*ìƒíƒœ:* ${issue.fields?.status?.name || 'ë¯¸ì •'}` },\n    { type: 'mrkdwn', text: `*ìš°ì„ ìˆœìœ„:* ${priority}` },\n    { type: 'mrkdwn', text: `*ë‹´ë‹¹ì:* ${assignee}` }\n  ];\n  if (desc) context.push({ type: 'mrkdwn', text: `ğŸ’¬ ${desc}` });\n  if (dueDate) context.push({ type: 'mrkdwn', text: dueDate });\n\n  return [sectionBlock, { type: 'context', elements: context.slice(0, 10) }, { type: 'divider' }];\n}\n\n// ì´ìŠˆ í•„í„°ë§\nconst allIssues = items.map(item => item.json);\nconst inProgress = allIssues.filter(i => i.fields?.statusCategory?.key === 'indeterminate');\n\n// ë©”ì‹œì§€ êµ¬ì„±\nblocks.push({\n  type: 'header',\n  text: { type: 'plain_text', text: `ğŸ“Š ${$('Set Excel Row Variables').first().json.name} IN PROGRESS JIRA ì‘ì—… í˜„í™© ë³´ê³  (${formattedDate} ê¸°ì¤€)`, emoji: true }\n});\nblocks.push({ type: 'divider' });\n\nblocks.push({\n  type: 'section',\n  text: { type: 'mrkdwn', text: `*ğŸ”¶ ì§„í–‰ ì¤‘ì¸ ì‘ì—… (IN PROGRESS)* - ì´ ${inProgress.length}ê±´` }\n});\n\ninProgress.forEach((issue, idx) => {\n  const blocksForIssue = formatIssueBlock(issue, idx);\n  blocks.push(...blocksForIssue);\n});\n\nblocks.push(\n  {\n    type: 'header',\n    text: { type: 'plain_text', text: 'ğŸ“Œ ìš”ì•½', emoji: true }\n  },\n  {\n    type: 'section',\n    fields: [\n      { type: 'mrkdwn', text: `*ì§„í–‰ ì¤‘ ì‘ì—…:*\\n${inProgress.length}ê±´` }\n    ]\n  },\n  {\n    type: 'context',\n    elements: [{ type: 'mrkdwn', text: `â±ï¸ ë³´ê³ ì„œ ìƒì„± ì‹œê°„: ${today.toLocaleTimeString()}` }]\n  },\n   {\n    type: 'section',\n    text: {\n      type: 'mrkdwn',\n      text: `<!subteam^${$node[\"Set Excel Row Variables\"].json.slack_group}> í™•ì¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤.`\n    }\n  }\n);\n\nreturn { blocks };"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1780,0],"id":"6d59d161-34fb-4ed4-a083-83a25fe67d85","name":"Jira Issue To Slack Message"},{"parameters":{"jsCode":"const today = new Date();\nconst formattedDate = `${today.getFullYear()}ë…„ ${today.getMonth() + 1}ì›” ${today.getDate()}ì¼`;\n\nconst blocks = [\n  {\n    type: 'header',\n    text: {\n      type: 'plain_text',\n      text: `ğŸ“Š ${$('Set Excel Row Variables').first().json.name} IN PROGRESS JIRA ì‘ì—… í˜„í™© ë³´ê³  (${formattedDate} ê¸°ì¤€)`,\n      emoji: true\n    }\n  },\n  { type: 'divider' },\n  {\n    type: 'section',\n    text: {\n      type: 'mrkdwn',\n      text: `*ğŸ”¶ ì§„í–‰ ì¤‘ì¸ ì‘ì—… (IN PROGRESS)* - ì´ 0ê±´`\n    }\n  },\n  {\n    type: 'section',\n    text: {\n      type: 'mrkdwn',\n      text: `ğŸ“­ í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤.`\n    }\n  },\n  { type: 'divider' },\n  {\n    type: 'header',\n    text: { type: 'plain_text', text: 'ğŸ“Œ ìš”ì•½', emoji: true }\n  },\n  {\n    type: 'section',\n    fields: [\n      { type: 'mrkdwn', text: `*ì§„í–‰ ì¤‘ ì‘ì—…:*\\n0ê±´` }\n    ]\n  },\n  {\n    type: 'context',\n    elements: [{ type: 'mrkdwn', text: `â±ï¸ ë³´ê³ ì„œ ìƒì„± ì‹œê°„: ${today.toLocaleTimeString()}` }]\n  },\n  {\n    type: 'section',\n    text: {\n      type: 'mrkdwn',\n      text: `<!subteam^${$node[\"Set Excel Row Variables\"].json.slack_group}> í™•ì¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤.`\n    }\n  }\n];\n\nreturn { blocks };"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1780,200],"id":"1ad6d5d3-cb7b-48fd-bc93-6d45524d3810","name":"Jira No Issue To Slack Message"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"d5cfd519-4fee-4455-a8e2-bde82d140131","leftValue":"={{$node[\"Get Developer Jira Issues\"].json}}","rightValue":"","operator":{"type":"object","operation":"notEmpty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1360,100],"id":"41f7bfb5-31d3-4562-8355-e1fe50f04f57","name":"If"},{"parameters":{"assignments":{"assignments":[{"id":"71e02481-915d-4ed9-9777-524070b45195","name":"spreadsheet_id","value":"1XfX5rudDarTzGtcS9gpQNjuGFr5N-H9JbuPsub3fdCY","type":"string"},{"id":"cc7bf0c9-fdbc-4f26-b2ac-3cd68bb1f31e","name":"tab_name","value":"Jira Task Status Cron","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[20,175],"id":"ff8d4fc9-c397-43da-9e16-2bf7ab2eddcc","name":"Set JIRA Task Sheet Variables"},{"parameters":{"workflowId":{"__rl":true,"value":"hj1Qpz1LUngjnHW5","mode":"list","cachedResultName":"[Sub] Google Spreadsheet Data Fetch using Opensheet"},"workflowInputs":{"mappingMode":"defineBelow","value":{},"matchingColumns":[],"schema":[],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[240,175],"id":"18a47204-12c5-41a7-9f1a-1ffe9304a1b8","name":"Execute JIRA Task Sheet"}],"connections":{"09:00 Trigger":{"main":[[{"node":"Get COLO Variables","type":"main","index":0}]]},"Loop Over Items":{"main":[[],[{"node":"Set Excel Row Variables","type":"main","index":0}]]},"Get Excel Row Data":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Get Developer Jira Issues":{"main":[[{"node":"If","type":"main","index":0}]]},"Slack":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Get COLO Variables":{"main":[[{"node":"Set JIRA Task Sheet Variables","type":"main","index":0}]]},"Set Excel Row Variables":{"main":[[{"node":"Get Developer Jira Issues","type":"main","index":0}]]},"Jira Issue To Slack Message":{"main":[[{"node":"Slack","type":"main","index":0}]]},"Jira No Issue To Slack Message":{"main":[[{"node":"Slack","type":"main","index":0}]]},"If":{"main":[[{"node":"Jira Issue To Slack Message","type":"main","index":0}],[{"node":"Jira No Issue To Slack Message","type":"main","index":0}]]},"Set JIRA Task Sheet Variables":{"main":[[{"node":"Execute JIRA Task Sheet","type":"main","index":0}]]},"Execute JIRA Task Sheet":{"main":[[{"node":"Get Excel Row Data","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Schedule Trigger":{"recurrenceRules":[]},"node:09:00 Schedule Trigger":{"recurrenceRules":[]},"node:17:00 Schedule Trigger":{"recurrenceRules":[]},"node:09:00 Trigger":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"600d88af-022d-4bf4-bce7-89d105967c5e","triggerCount":1,"tags":[]}