{"createdAt":"2025-05-16T01:40:27.356Z","updatedAt":"2025-05-16T02:53:12.000Z","id":"gb6KAcoOLAaqxdIF","name":"Backend Github PR Review Form","active":true,"nodes":[{"parameters":{"model":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"gpt-4o-mini"},"options":{}},"id":"b70498e1-d933-4e55-b9aa-981704c67c41","name":"OpenAI Chat Model","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","position":[368,60],"typeVersion":1.2,"credentials":{"openAiApi":{"id":"teZK5ibPNHcUd7eK","name":"Developjik OpenAi account"}}},{"parameters":{"mode":"runOnceForEachItem","jsCode":"const parseLastDiff = (gitDiff, filename) => { \n  gitDiff = gitDiff.replace(/\\n\\\\ No newline at end of file/, '')\n  \n  const diffList = gitDiff.trimEnd().split('\\n').reverse();\n  const lastLineFirstChar = diffList?.[0]?.[0];\n  const lastDiff =\n    diffList.find((item) => {\n      return /^@@ \\-\\d+,\\d+ \\+\\d+,\\d+ @@/g.test(item);\n    }) || '';\n\n  const [lastOldLineCount, lastNewLineCount] = lastDiff\n    .replace(/@@ \\-(\\d+),(\\d+) \\+(\\d+),(\\d+) @@.*/g, ($0, $1, $2, $3, $4) => {\n      return `${+$1 + +$2},${+$3 + +$4}`;\n    })\n    .split(',');\n  \n  if (!/^\\d+$/.test(lastOldLineCount) || !/^\\d+$/.test(lastNewLineCount)) {\n    return {\n      lastOldLine: -1,\n      lastNewLine: -1,\n      gitDiff: gitDiff,\n    };\n  }\n\n  const lastOldLine = lastLineFirstChar === '+' ? null : (parseInt(lastOldLineCount) || 0) - 1;\n  const lastNewLine = lastLineFirstChar === '-' ? null : (parseInt(lastNewLineCount) || 0) - 1;\n\n  return {\n    filename,\n    lastOldLine,\n    lastNewLine,\n    gitDiff,\n  };\n};\n\nreturn parseLastDiff($input.item.json.patch || '', $input.item.json.filename || '' )\n"},"id":"927fb1d6-1667-4445-96e8-0510f692381f","name":"Parse Last Diff Line","type":"n8n-nodes-base.code","position":[-160,-160],"typeVersion":2},{"parameters":{"promptType":"define","text":"=**ÌååÏùº Í≤ΩÎ°ú**: {{ $('Loop').item.json.filename }}\n\nÎã§ÏùåÏùÄ Î∞±ÏóîÎìú ÏΩîÎìúÏùò Î≥ÄÍ≤Ω ÏÇ¨Ìï≠ÏûÖÎãàÎã§.  \nÏïÑÎûòÏùò **Í∏∞Ï°¥ ÏΩîÎìúÏôÄ Î≥ÄÍ≤ΩÎêú ÏΩîÎìú**Î•º Í∏∞Î∞òÏúºÎ°ú, Îã§Ïùå Í∏∞Ï§ÄÏóê Îî∞Îùº **Java(Spring Í∏∞Î∞ò) Î∞±ÏóîÎìú ÏΩîÎìú Î¶¨Î∑∞**Î•º ÏûëÏÑ±Ìï¥ Ï£ºÏÑ∏Ïöî.\n\n\nüß† ÏΩîÎìú Î¶¨Î∑∞ Î™©Ï†Å\n- Î≥ÄÍ≤Ω ÏùòÎèÑÏôÄ Î™©Ï†ÅÏùÑ Î®ºÏ†Ä ÌååÏïÖ\n- ÏΩîÎìú Î≥ÄÍ≤Ω ÌõÑ ÏÉàÎ°úÏö¥ ÏΩîÎìúÏóêÏÑú Í∞úÏÑ†Ìï† Î∂ÄÎ∂ÑÏù¥ Ï°¥Ïû¨Ìï†Ïãú Ï†úÏïà Ìè¨Ìï®\n- Í∏∞Ïà†Ï†Å Í∑ºÍ±∞Í∞Ä Ìè¨Ìï®Îêú Î¶¨Î∑∞Î•º ÌïúÍµ≠Ïñ¥Î°ú Markdown Ìè¨Îß∑ÏúºÎ°ú ÏûëÏÑ±\n\n\n\n**üîÄ ÏΩîÎìú Î≥ÄÍ≤Ω Ï†Ñ ÏõêÎ≥∏ ÏΩîÎìú**:\n```tsx\n{{ $json.originalCode }}\n```\n\n**‚úÖ ÏΩîÎìú Î≥ÄÍ≤Ω ÌõÑ ÏÉàÎ°úÏö¥ ÏΩîÎìú**:\n```tsx\n{{ $json.newCode }}\n```\n\nüéÅ ÏΩîÎìú Î¶¨Î∑∞Îäî ÎèôÎ£å Í∞úÎ∞úÏûêÏùò ÏÑ±Ïû•ÏùÑ ÎèïÎäî Í¥ÄÏ†êÏóêÏÑú ÏßÑÏã¨ÏùÑ Îã¥ÏïÑ ÏûëÏÑ±Ìï¥ Ï£ºÏÑ∏Ïöî.","options":{"systemMessage":"=üß† Î∞±ÏóîÎìú ÏΩîÎìú Î¶¨Î∑∞ Ï†ÑÎ¨∏Í∞Ä ÌîÑÎ°¨ÌîÑÌä∏\n\n‚∏ª\n\nüéØ Ïó≠Ìï† Ï†ïÏùò\n\nÎãπÏã†ÏùÄ Java, Spring Framework, JPA, RESTful APIÏóê Ï†ïÌÜµÌïú Î∞±ÏóîÎìú Ï†ÑÎ¨∏Í∞ÄÏûÖÎãàÎã§.\nÎã®ÏàúÌïú ÏßÄÏ†ÅÏù¥ ÏïÑÎãå, Ïã§ÏßàÏ†ÅÏù∏ Í∞úÏÑ† Î∞©Ìñ•ÏùÑ Ï†úÏãúÌïòÍ≥† ÎèôÎ£å Í∞úÎ∞úÏûêÏùò ÏÑ±Ïû•ÏùÑ ÎèïÎäî ÏΩîÎìú Î¶¨Î∑∞Ïñ¥Î°úÏÑú ÌôúÎèôÌï©ÎãàÎã§.\n\n‚∏ª\n\n‚úÖ Î¶¨Î∑∞ ÏõêÏπô\n\t1.\tÏ†ïÌôïÌïú Ïù¥Ìï¥\nÏΩîÎìúÏùò ÏùòÎèÑÏôÄ Îß•ÎùΩÏùÑ Î®ºÏ†Ä ÌååÏïÖÌïòÍ≥† Í∑∏Ïóê ÎßûÎäî ÌîºÎìúÎ∞±ÏùÑ Ï†úÍ≥µÌï©ÎãàÎã§.\n\t2.\tÏã§Î¨¥ Ï§ëÏã¨ Ï†ÑÎ¨∏ÏÑ±\nÏù¥Î°†Î≥¥Îã§Îäî Ïã§Î¨¥ÏóêÏÑú Ï¶âÏãú ÎèÑÏõÄÏù¥ ÎêòÎäî Íµ¨Ï°∞/Ìå®ÌÑ¥/Î¶¨Ìå©ÌÜ†ÎßÅ Ï§ëÏã¨ÏúºÎ°ú Î¶¨Î∑∞Ìï©ÎãàÎã§.\n\t3.\tÌï®Íªò Í∞úÏÑ†ÌïòÎäî ÏãúÏÑ†\nÎ¨∏Ï†úÏ†êÏùÑ ÏßÄÏ†ÅÌïòÎäî Îç∞ Í∑∏ÏπòÏßÄ ÏïäÍ≥†, Ïñ¥ÎñªÍ≤å Í∞úÏÑ†ÌïòÎ©¥ Ï¢ãÏùÑÏßÄ Íµ¨Ï≤¥Ï†ÅÏù∏ Ï†úÏïàÏùÑ Ìï®Íªò Ï†úÍ≥µÌï©ÎãàÎã§.\n\t4.\tÎã§Í∞ÅÎèÑ Í≥†Î†§\nÏú†ÏßÄÎ≥¥ÏàòÏÑ±, ÏÑ±Îä•, Î≥¥Ïïà, ÌòëÏóÖ Í¥ÄÏ†êÍπåÏßÄ Îã§ÏñëÌïú Í∞ÅÎèÑÏóêÏÑú ÌîºÎìúÎ∞±Ìï©ÎãàÎã§.\n\t5.\tÍµêÏú°Ï†Å Ï†ëÍ∑º\nÎã®ÏàúÌïú ÏΩîÎìú ÏÑ§Î™ÖÏù¥ ÏïÑÎãàÎùº, ‚ÄúÏôú Ïù¥Îü∞ Íµ¨Ï°∞Í∞Ä Îçî Ï¢ãÏùÄÍ∞Ä?‚ÄùÎ•º Ìï®Íªò ÏÑ§Î™ÖÌïòÏó¨ ÌïôÏäµÏóê Í∏∞Ïó¨Ìï©ÎãàÎã§.\n\n‚∏ª\n\nüßæ Î¶¨Î∑∞ Ìè¨Îß∑\n\t‚Ä¢\tÏñ∏Ïñ¥: ÌïúÍµ≠Ïñ¥\n\t‚Ä¢\tÌòïÏãù: Markdown\n\t‚Ä¢\tÏä§ÌÉÄÏùº: Î™ÖÌôïÌïòÍ≥† Í∞ÑÍ≤∞ÌïòÎ©∞ ÏßÑÏã¨ Îã¥Í∏¥ ÏÑ§Î™Ö\n\t‚Ä¢\tÏù¥Î™®ÏßÄ: ‚ú®, ‚ö†Ô∏è, üí° Îì±ÏúºÎ°ú ÌïµÏã¨ Ìè¨Ïù∏Ìä∏ Í∞ïÏ°∞\n\t‚Ä¢\tÏΩîÎìú: Í∞úÏÑ† Ï†úÏïà Ïãú Java ÎòêÎäî Spring Í∏∞Î∞ò ÏòàÏ†ú ÏΩîÎìú Ìè¨Ìï®\n\n‚∏ª\n\nüîç Î¶¨Î∑∞ Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏\n\nüì¶ Java & OOP\n\t‚Ä¢\tÎã®Ïùº Ï±ÖÏûÑ ÏõêÏπô(SRP), ÏùòÏ°¥ÏÑ± Ïó≠Ï†Ñ, Ï∫°ÏäêÌôî\n\t‚Ä¢\tÎ©îÏÑúÎìú/ÌÅ¥ÎûòÏä§ Î™ÖÎ™Ö Í∑úÏπô ÏùºÍ¥ÄÏÑ±\n\t‚Ä¢\tÎ∂àÎ≥ÄÏÑ± Ïú†ÏßÄ, Null-Safety ÎåÄÏùë (Optional, @NonNull)\n\nüå± Spring Framework\n\t‚Ä¢\tBean Ï£ºÏûÖ Î∞©Ïãù(@Autowired, ÏÉùÏÑ±Ïûê Ï£ºÏûÖ)\n\t‚Ä¢\tController-Service-Repository Î∂ÑÎ¶¨ Î∞è Í≥ÑÏ∏µ Ï±ÖÏûÑ\n\t‚Ä¢\tAOP, Ìä∏ÎûúÏû≠ÏÖò Ï≤òÎ¶¨, ÏòàÏô∏ Ï≤òÎ¶¨ ÏùºÍ¥ÄÏÑ±\n\nüõ†Ô∏è JPA & Database\n\t‚Ä¢\tEntity ÏÑ§Í≥ÑÏùò Î™ÖÌôïÏÑ± (@Entity, @Embedded, @ValueObject)\n\t‚Ä¢\tN+1 Î¨∏Ï†ú Î∞è Fetch Ï†ÑÎûµ (LAZY, JOIN FETCH)\n\t‚Ä¢\tQueryÏùò ÏÑ±Îä• Î∞è JPQL/NativeQuery Ï†ÅÏ†àÏÑ±\n\nüîê Î≥¥Ïïà Î∞è ÏòàÏô∏\n\t‚Ä¢\tÏûÖÎ†• Í≤ÄÏ¶ù (@Valid, @Validated)\n\t‚Ä¢\tÏ†ÑÏó≠ ÏòàÏô∏ Ï≤òÎ¶¨ (@ControllerAdvice)\n\t‚Ä¢\tÏù∏Ï¶ù/Ïù∏Í∞Ä ÌùêÎ¶ÑÍ≥º Î≥¥Ïïà ÏÑ§Ï†ï\n\nüì¶ ÌÖåÏä§Ìä∏\n\t‚Ä¢\tÎã®ÏúÑ/ÌÜµÌï© ÌÖåÏä§Ìä∏ ÏΩîÎìú Ï°¥Ïû¨ Ïó¨Î∂Ä\n\t‚Ä¢\tÌÖåÏä§Ìä∏ ÏΩîÎìúÏùò Î™ÖÌôïÌïú Î™©Ï†ÅÍ≥º Í≤ÄÏ¶ù Î∞©Ïãù\n\nüöÄ ÏÑ±Îä• ÏµúÏ†ÅÌôî\n\t‚Ä¢\tÎ∂àÌïÑÏöîÌïú Ïó∞ÏÇ∞ Ï†úÍ±∞, Ï∫êÏã± Ï†ÑÎûµ\n\t‚Ä¢\tÏä§Ìä∏Î¶º/ÎûåÎã§ ÏÇ¨Ïö© ÏµúÏ†ÅÌôî\n\t‚Ä¢\tÎ©îÎ™®Î¶¨ Î∞è Ìä∏ÎûúÏû≠ÏÖò Î≤îÏúÑ ÏµúÏ†ÅÌôî\n\n‚∏ª\n\nüéÅ Î¶¨Î∑∞ Ïãú Ìï≠ÏÉÅ Ìè¨Ìï®ÎêòÎäî Ï∂îÍ∞Ä Ï†úÏïà\n\nÌï≠Î™©\tÏÑ§Î™Ö\nüí° ÎåÄÏïà ÏΩîÎìú ÏòàÏãú\tÌòÑÏû¨ Íµ¨Ï°∞Î≥¥Îã§ Îçî ÎÇòÏùÄ Î∞©Ìñ•Ïùò ÏΩîÎìú ÏòàÏãúÎ•º Java Í∏∞Î∞òÏúºÎ°ú Ï†úÍ≥µÌï©ÎãàÎã§.\nüõ†Ô∏è Î¶¨Ìå©ÌÜ†ÎßÅ Î∞©Ìñ• Ï†úÏïà\tÎ©îÏÑúÎìú Î∂ÑÎ¶¨, Ï†ÑÎûµ Ìå®ÌÑ¥ ÎèÑÏûÖ, ÏÑ§Ï†ï/ÌïµÏã¨ Î°úÏßÅ Î∂ÑÎ¶¨ Îì±\nüìö Ï∞∏Í≥† ÎßÅÌÅ¨ / Î¨∏ÏÑú\tÍ≥µÏãù Î¨∏ÏÑú, Î∏îÎ°úÍ∑∏ Í∏Ä, Ïã§Î¨¥ ÏÇ¨Î°Ä Îì± ÌïôÏäµÏóê ÎèÑÏõÄÏù¥ Îê† ÎßÅÌÅ¨ Í≥µÏú†\nüîÑ Ïª®Î≤§ÏÖò Ï†ïÎ¶¨\tÎ∞òÎ≥µÏ†ÅÏúºÎ°ú Î∞úÏÉùÌï† Ïàò ÏûàÎäî ÎÑ§Ïù¥Î∞ç/Ìå®ÌÇ§Ïßï/Ïñ¥ÎÖ∏ÌÖåÏù¥ÏÖò ÏúÑÏπò Îì±ÏùÑ Ïª®Î≤§ÏÖòÏúºÎ°ú Ï†úÏïà\n\n\n‚∏ª\n\nüìä ÏΩîÎìú ÌèâÍ∞Ä Ï†êÏàò: {Ï†êÏàò}Ï†ê / 100\n\nÏù¥ ÌòïÏãùÏùÑ Î∞òÎìúÏãú Í∑∏ÎåÄÎ°ú Ïú†ÏßÄÌï¥ Ï£ºÏÑ∏Ïöî.\n\n‚∏ª\n\nüí¨ ÏòàÏãú Î¶¨Î∑∞ ÌÜ§\n\n‚∏ª\n\n‚úÖ Ï†ÑÎ∞òÏ†ÅÏù∏ ÌîºÎìúÎ∞±\n\nÏÑúÎπÑÏä§ Î†àÏù¥Ïñ¥ÏôÄ ÎèÑÎ©îÏù∏ Î°úÏßÅÏù¥ Ïûò Î∂ÑÎ¶¨ÎêòÏñ¥ ÏûàÏñ¥ Íµ¨Ï°∞Ï†ÅÏúºÎ°ú Î™ÖÌôïÌï©ÎãàÎã§.\nÌäπÌûà @TransactionalÏùÑ ÌïÑÏöîÌïú Î©îÏÑúÎìúÏóêÎßå Ï†ÅÏö©Ìïú Ï†êÏù¥ Ï¢ãÏùÄ ÏÑ†ÌÉùÏûÖÎãàÎã§ üëè\n\nÎã§Îßå, ÏòàÏô∏ Ï≤òÎ¶¨ Î∞©ÏãùÏù¥ Ïª®Ìä∏Î°§Îü¨ ÎÇ¥Ïóê Í∞úÎ≥ÑÏ†ÅÏúºÎ°ú Î∂ÑÏÇ∞ÎêòÏñ¥ ÏûàÏñ¥ Ï†ÑÏó≠ ÏòàÏô∏ Ï≤òÎ¶¨(@ControllerAdvice) ÎèÑÏûÖ Ïãú Ïú†ÏßÄÎ≥¥ÏàòÏóê Îçî Ïú†Î¶¨Ìï† Ïàò ÏûàÏäµÎãàÎã§.\n\n‚∏ª\n\n‚ö†Ô∏è Í∞úÏÑ† Ìè¨Ïù∏Ìä∏\n\t1.\tEntityÏóêÏÑú ÎπÑÏ¶àÎãàÏä§ Î°úÏßÅ Ï≤òÎ¶¨\n\t‚Ä¢\tÌòÑÏû¨ UserEntityÏóêÏÑú Ïô∏Î∂Ä ÏãúÏä§ÌÖú Ìò∏Ï∂ú Î°úÏßÅÏù¥ Ìè¨Ìï®ÎêòÏñ¥ ÏûàÏäµÎãàÎã§.\n\t‚Ä¢\t‚Üí ÎèÑÎ©îÏù∏ Í∞ùÏ≤¥Îäî ÏàúÏàòÌïòÍ≤å Ïú†ÏßÄÌïòÍ≥†, ÏÑúÎπÑÏä§Î°ú Î∂ÑÎ¶¨ÌïòÎ©¥ ÏùëÏßëÎèÑÎ•º ÎÜíÏùº Ïàò ÏûàÏäµÎãàÎã§.\n\n‚∏ª\n\nüí° Í∞úÏÑ† Ï†úÏïà\n\n// Í∞úÏÑ† Ï†Ñ - EntityÍ∞Ä Ïô∏Î∂Ä ÏãúÏä§ÌÖú Ìò∏Ï∂ú\npublic class User {\n    public void syncToExternalSystem() {\n        externalClient.sendData(this);\n    }\n}\n\n// Í∞úÏÑ† ÌõÑ - ÏÑúÎπÑÏä§ Í≥ÑÏ∏µÏóêÏÑú Ï≤òÎ¶¨\npublic class UserService {\n    public void syncUser(User user) {\n        externalClient.sendData(user);\n    }\n}\n\n\n‚∏ª\n\nüìö Ï∞∏Í≥† ÎßÅÌÅ¨ ÏòàÏãú\n\t‚Ä¢\tSpring Í≥µÏãù Î¨∏ÏÑú - ÏòàÏô∏ Ï≤òÎ¶¨ Ï†ÑÎûµ\n\t‚Ä¢\tBaeldung - Spring Best Practices\n\n‚∏ª\n\nüîÑ Ïª®Î≤§ÏÖò Ï†úÏïà ÏòàÏãú\n\t‚Ä¢\tDTO ÌÅ¥ÎûòÏä§Îäî XXXRequest, XXXResponse ÌòïÌÉúÎ°ú Î™ÖÎ™ÖÌïòÏó¨ ÏùòÎèÑ Íµ¨Î∂ÑÏùÑ Î™ÖÌôïÌûà ÌïòÏãúÎ©¥ Ï¢ãÍ≤†ÏäµÎãàÎã§.\n\n‚∏ª  \nüìä ÏΩîÎìú ÌèâÍ∞Ä Ï†êÏàò: 78Ï†ê / 100  \n"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.8,"position":[280,-160],"id":"8e1bbbdb-9c44-4f71-ac45-11b51575b0d7","name":"AI Agent"},{"parameters":{"url":"=https://api.github.com/repos/{{ $('Form Trigger').item.json.github_organization }}/{{ $('Form Trigger').item.json.github_repo }}/pulls/{{ $('Form Trigger').item.json.pr_number }}/files","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Accept","value":"application/vnd.github.v3+json"},{"name":"Authorization","value":"=Bearer {{$node[\"Get COLO Variables\"].json.github_auth}}"}]},"options":{}},"id":"f8c5b4d2-3358-4d03-8150-2bd8af27c0dc","name":"Get PR Files Change","type":"n8n-nodes-base.httpRequest","position":[-820,140],"typeVersion":4.2},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"loose","version":2},"conditions":[{"id":"501623a9-9515-4034-bb13-a5a6a4f924eb","operator":{"type":"string","operation":"isNotEmpty"},"leftValue":"={{ $json.patch }}","rightValue":""},{"id":"f2928260-ef04-47cb-9c36-432e29fe52d1","leftValue":"={{ $json.changes }}","rightValue":10,"operator":{"type":"number","operation":"gte"}}],"combinator":"or"},"looseTypeValidation":true,"options":{"ignoreCase":false}},"id":"a1b3126e-2f94-463e-93e8-36ee203fc790","name":"Skip File Change","type":"n8n-nodes-base.if","position":[-380,-160],"typeVersion":2.2},{"parameters":{"method":"POST","url":"=https://api.github.com/repos/{{ $('Form Trigger').item.json.github_organization }}/{{ $('Form Trigger').item.json.github_repo }}/pulls/{{ $('Form Trigger').item.json.pr_number }}/comments","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Accept","value":"application/vnd.github.v3+json"},{"name":"Authorization","value":"=Bearer {{$node[\"Get COLO Variables\"].json.github_auth}}"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"body","value":"={{ $('Process GPT Review').item.json.review }}"},{"name":"commit_id","value":"={{ $('Get PR Info').item.json.head.sha }}"},{"name":"path","value":"={{ $('Loop').item.json.filename }}"},{"name":"line","value":"={{ $('Parse Last Diff Line').item.json.lastNewLine || $('Parse Last Diff Line').item.json.lastOldLine || 1 }}"},{"name":"side","value":"={{ $('Parse Last Diff Line').item.json.lastNewLine ? 'RIGHT' : 'LEFT' }}"}]},"options":{}},"id":"d7b6ab33-7455-4a38-933d-4eb0acd6f291","name":"Post PR Comment","type":"n8n-nodes-base.httpRequest","position":[1096,-35],"typeVersion":4.2},{"parameters":{"options":{}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[-600,140],"id":"1868be98-e54f-4e68-9bc4-0f74c3fc69ab","name":"Loop"},{"parameters":{"jsCode":"var review = $input.item.json.output || '';\n\n// Ï†ïÍ∑úÏãù: Îã§ÏñëÌïú ÌëúÌòÑ ÎåÄÏùë (ÍµµÍ≤å, ÏΩúÎ°†, Ïù¥Î™®ÏßÄ, Í≥µÎ∞±)\nvar scoreMatch = review.match(/(?:üìä\\s*)?(?:\\*\\*)?ÏΩîÎìú\\s*ÌèâÍ∞Ä\\s*Ï†êÏàò(?:\\*\\*)?[:Ôºö]?\\s*(\\d+)/);\n\nvar score = scoreMatch ? parseInt(scoreMatch[1], 10) : 0;\n\n// Ï†êÏàò ÏïûÍπåÏßÄÎßå ÏûòÎùºÎÇ¥Í∏∞\nvar trimmedReview = review.split(/(?:üìä\\s*)?(?:\\*\\*)?ÏΩîÎìú\\s*ÌèâÍ∞Ä\\s*Ï†êÏàò(?:\\*\\*)?[:Ôºö]/)[0].trim();\n\nreturn [\n  {\n    json: {\n      score: score,\n      review: trimmedReview\n    }\n  }\n];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[660,-160],"id":"ed9cf796-56d4-412f-8ff1-4c386325de3f","name":"Process GPT Review"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"8ab43db0-3e45-4ce0-8658-34d2d53fe6ac","leftValue":"={{ $json.score }}","rightValue":80,"operator":{"type":"number","operation":"lt"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[876,-160],"id":"d25356be-a80b-4023-bb77-8c53e2634411","name":"If GPT Review Needed"},{"parameters":{"mode":"runOnceForEachItem","jsCode":"var diff = $input.item.json.gitDiff || ''\n\nlet lines = diff.trimEnd().split('\\n');\n\nlet originalCode = '';\nlet newCode = '';\n\nlines.forEach(line => {\n    if (line.startsWith('-')) {\n        originalCode += line.substring(1) + \"\\n\";\n    } else if (line.startsWith('+')) {\n        newCode += line.substring(1) + \"\\n\";\n    } else if (!line.startsWith('@')) {\n        originalCode += line + \"\\n\";\n        newCode += line + \"\\n\";\n    }\n});\n\nconst codeObj = {\n  originalCode: originalCode,\n  newCode: newCode\n};\n\nreturn codeObj\n"},"id":"b52e65f0-5608-42c2-be20-cb16c76f087f","name":"Code","type":"n8n-nodes-base.code","position":[60,-160],"typeVersion":2},{"parameters":{"formTitle":"Backend Github PR Review","formDescription":"Backend Github PR ReviewÎ•º AIÏóê ÏöîÏ≤≠Ìï©ÎãàÎã§.","formFields":{"values":[{"fieldLabel":"github_organization","fieldType":"dropdown","fieldOptions":{"values":[{"option":"colosseumcoinckr"}]},"requiredField":true},{"fieldLabel":"github_repo","fieldType":"dropdown","fieldOptions":{"values":[{"option":"pms-backend"}]},"requiredField":true},{"fieldLabel":"pr_number","fieldType":"number","placeholder":"PR Î≤àÌò∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî.","requiredField":true}]},"options":{"appendAttribution":false,"buttonLabel":"PR Review ÏöîÏ≤≠","path":"backend-code-review","ignoreBots":true}},"type":"n8n-nodes-base.formTrigger","typeVersion":2.2,"position":[-1700,140],"id":"4ef608b6-6d6b-40f8-84f4-00167688cd82","name":"Form Trigger","webhookId":"b26f5221-45bc-4833-b0ed-0334aaa880ea"},{"parameters":{"url":"=https://api.github.com/repos/{{ $('Form Trigger').item.json.github_organization }}/{{ $('Form Trigger').item.json.github_repo }}/pulls/{{ $('Form Trigger').item.json.pr_number }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Accept","value":"application/vnd.github.v3+json"},{"name":"Authorization","value":"=Bearer {{$node[\"Get COLO Variables\"].json.github_auth}}"}]},"options":{}},"id":"b2efe77a-6340-4b81-aa16-d9690f5344bf","name":"Get PR Info","type":"n8n-nodes-base.httpRequest","position":[-1260,140],"typeVersion":4.2},{"parameters":{"workflowId":{"__rl":true,"value":"uGqCptWtD45pUJt4","mode":"list","cachedResultName":"[COLO] (Sub) Get COLO Variables"},"workflowInputs":{"mappingMode":"defineBelow","value":{},"matchingColumns":[],"schema":[],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[-1480,140],"id":"93dac43f-72fd-4fa8-9b21-f4e1469e6bec","name":"Get COLO Variables"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"3304ec64-441d-425a-b376-fcbff85583b3","leftValue":"={{ $json.state }}","rightValue":"open","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-1040,140],"id":"215657e2-54eb-4d10-84e8-f5df1759f9ab","name":"If PR Opened"}],"connections":{"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Parse Last Diff Line":{"main":[[{"node":"Code","type":"main","index":0}]]},"AI Agent":{"main":[[{"node":"Process GPT Review","type":"main","index":0}]]},"Get PR Files Change":{"main":[[{"node":"Loop","type":"main","index":0}]]},"Skip File Change":{"main":[[{"node":"Parse Last Diff Line","type":"main","index":0}],[{"node":"Loop","type":"main","index":0}]]},"Post PR Comment":{"main":[[{"node":"Loop","type":"main","index":0}]]},"Loop":{"main":[[],[{"node":"Skip File Change","type":"main","index":0}]]},"Process GPT Review":{"main":[[{"node":"If GPT Review Needed","type":"main","index":0}]]},"If GPT Review Needed":{"main":[[{"node":"Post PR Comment","type":"main","index":0}],[{"node":"Loop","type":"main","index":0}]]},"Code":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Form Trigger":{"main":[[{"node":"Get COLO Variables","type":"main","index":0}]]},"Get COLO Variables":{"main":[[{"node":"Get PR Info","type":"main","index":0}]]},"Get PR Info":{"main":[[{"node":"If PR Opened","type":"main","index":0}]]},"If PR Opened":{"main":[[{"node":"Get PR Files Change","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"c9701a89-3993-4ace-b740-19b7ac46ca24","triggerCount":1,"tags":[]}